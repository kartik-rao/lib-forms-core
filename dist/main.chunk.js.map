{"version":3,"sources":["webpack://Forms/./src/app.tsx","webpack://Forms/./src/config.ts","webpack://Forms/./src/models/column.ts","webpack://Forms/./src/models/common.ts","webpack://Forms/./src/models/condition.predicate.ts","webpack://Forms/./src/models/condition.ts","webpack://Forms/./src/models/factory.ts","webpack://Forms/./src/models/field.properties.ts","webpack://Forms/./src/models/field.ts","webpack://Forms/./src/models/form.ts","webpack://Forms/./src/models/layout.ts","webpack://Forms/./src/models/page.ts","webpack://Forms/./src/models/section.ts","webpack://Forms/./src/models/validation.ts","webpack://Forms/./src/models/validator.ts","webpack://Forms/./src/store/FormStore.ts","webpack://Forms/./src/store/FormStoreProvider.tsx","webpack://Forms/external \"moment\"","webpack://Forms/external \"React\"","webpack://Forms/external \"ReactDOM\""],"names":["FormView","lazy","then","module","default","FormWrapper","props","localStore","isLoading","response","this","error","hasEnded","name","isRemoteError","isThrownError","useEffect","formId","_response","fetch","apiHost","json","redirect","window","location","console","fetchData","style","height","overflow","backgroundColor","active","status","title","message","Suspense","fallback","initialState","renderForm","selector","log","env","version","document","querySelector","matches","hostname","match","port","length","debug","Column","data","store","_type","initialize","fields","reduce","all","f","concat","validator","errors","every","i","isValid","id","uuid","field","index","splice","push","forEach","addField","index1","index2","atIndex","toIndex","map","asPlainObject","span","valueOrDefault","value","defaultValue","Predicate","operator","condition","PredicateConditions","indexOf","Error","PredicateOperators","Condition","predicates","p","ancestors","self","lhs","rhs","op","state","conditionsDisabled","currentValue","values","result","uuidv1","EmptyForm","description","formLayoutOptions","showPageTitles","showSteps","showSectionBorders","showPageBorders","showSectionTitles","validationDisablesPaging","layout","itemLayoutOptions","labelAlign","labelCol","offset","wrapperCol","content","subtitle","Factory","item","Math","random","toFixed","predicate","ensureIds","makePredicates","r","inputType","radiogroup","checkboxgroup","select","componentProps","columns","c","makeFields","floor","column","sections","s","makeColumns","pages","page","makeSections","formData","form","makePages","_formData","FieldTypes","text","input","checkbox","number","textarea","daterange","datepicker","monthpicker","timepicker","yearpicker","rangepicker","rate","slider","textblock","Field","label","helpText","placeholder","fieldOptions","valuePropName","type","Object","assign","validation","rule","storage","children","touched","setValue","setCondition","conditionState","validate","isValidateable","presence","setFieldValue","setFieldTouched","_dispose","change","setConditionState","newValue","clone","recurseEverything","detectCycles","JSON","stringify","SubmitState","SubmitResultType","Form","submitState","NOT_SUBMITTED","exid","submitTarget","successRedirect","errorRedirect","submitErrorMessage","submitSuccessMessage","labels","width","sidebar","scripts","styles","datasets","paginate","css","inline","external","header","rows","footer","trackingPixels","total","numFields","preventSubmit","ERROR","idFieldMap","uuidFieldMap","keys","SUBMITTING","AWAITING_SUBMIT","SUCCESS","USER_SUCCESS_MESSAGE","DEFAULT_SUCCESS_MESSAGE","USER_ERROR_MESSAGE","DEFAULT_ERROR_MESSAGE","e","preventDefault","stopPropagation","setSubmitting","meta","payload","key","isSubmittable","a","post","preventRedirects","href","submitError","bound","AllScreenWidths","LayoutOption","filter","d","dimension","colspan","FormLayoutOptions","ItemLayoutOptions","Page","fieldNames","section","fieldIds","icon","Section","gutter","ValidationAllowedRules","ValidationRuleNames","ValidationRuleMap","ValidationRule","date","datetime","email","equality","exclusion","format","inclusion","numericality","url","settings","extend","validators","parse","options","utc","dateOnly","Validator","validationErrors","prefixedMessage","unPrefixedMessage","replace","attribute","toUpperCase","validationDisabled","isHidden","constraints","formatters","custom","formatError","bind","setFieldError","undefined","createFormStore","currentPage","showDebug","isReady","submitting","toggleShowDebug","numPages","nextPage","prevPage","setForm","formStoreContext","FormStoreProvider","formStore","makeForm","Provider","exports","moment","React","ReactDOM"],"mappings":"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","file":"main.chunk.js","sourcesContent":["import { Layout, Result, Skeleton } from \"antd\";\nimport { toJS } from 'mobx';\nimport { useLocalStore, useObserver } from 'mobx-react';\nimport React from 'react';\nimport { render } from 'react-dom';\nimport config from \"./config\";\nimport \"./forms.core.m.css\";\nimport { FormStoreProvider } from \"./store/FormStoreProvider\";\n\nexport interface IFormRenderProps {\n    formId: string;\n    initialState? : any;\n}\n\nconst FormView = React.lazy(() => import(/* webpackChunkName: \"core\" */ \"./views/FormView\").then((module) => {return {default: module.FormView}}));\n\nconst FormWrapper : React.FC<IFormRenderProps> = (props: IFormRenderProps) => {\n\n    const localStore = useLocalStore(() => ({\n        isLoading: true as boolean,\n        response : null as any,\n        get status () : \"warning\"|\"error\"|\"success\" {\n            if (this.isLoading || !this.response || (this.response && !this.response.error)) {\n                return \"success\";\n            }\n            return this.response.error == \"InactiveForm\" ? \"warning\" : \"error\";\n        },\n        get message () : string {\n            if (!this.response || !this.response.error) {\n                return \"\";\n            }\n            if (this.response.error == \"InactiveForm\") {\n                return this.response.hasEnded ? `${this.response.name} is no longer accepting entries` : `${this.response.name} hasn't starting accepting entries`\n            }\n            return \"No content available at this location, please check the URL.\"\n        },\n        isRemoteError: false as boolean,\n        isThrownError: false as boolean\n    }));\n\n    React.useEffect(() => {\n        let fetchData = async function() {\n            try {\n                let _response: any = await fetch(`//${config.apiHost}/form/json/${props.formId}`);\n                let response = await _response.json();\n                localStore.response = response;\n                if (response.error) {\n                    if (response.error == \"InactiveForm\" && response.redirect) {\n                        window.location = response.redirect;\n                        return;\n                    }\n                    localStore.isRemoteError = true;\n                }\n            } catch (error) {\n                localStore.isThrownError = true;\n                console.error(error);\n            }\n            localStore.isLoading = false;\n        }\n\n        if(props.formId) {\n            fetchData();\n        }\n    }, []);\n\n    return useObserver(() => {\n        return <Layout style={{height: '100vh', overflow: 'hidden', backgroundColor: \"#ffff\"}}>\n        { localStore.isLoading ? <Skeleton active={true}/> : <>\n            {localStore.isRemoteError && <Result status={localStore.status} title={localStore.message}/>}\n            {localStore.isThrownError && <Result status=\"error\" title=\"There was an error fetching this content, please try again later\"/>}\n            {localStore.response && <React.Suspense fallback=\"Loading\">\n                <FormStoreProvider initialState={toJS(localStore.response)}>\n                    <FormView />\n                </FormStoreProvider>\n            </React.Suspense>}\n        </> }\n    </Layout>});\n}\n\nexport async function renderForm(selector:string, formId: string, initialState?: any) {\n    console.log(`lib-forms-core [${config.env}] [${config.version}]`);\n    if (initialState) {\n        render(\n            <Layout style={{height: '100vh', overflow: 'hidden'}}>\n                <React.Suspense fallback=\"Loading\">\n                    <FormStoreProvider initialState={initialState}>\n                        <FormView />\n                    </FormStoreProvider>\n                </React.Suspense>\n            </Layout>, document.querySelector(selector)\n        )\n    } else {\n        render (<FormWrapper formId={formId}/>, document.querySelector(selector))\n    }\n};","declare var __VERSION__ : string;\ndeclare var __API_HOST__ : string;\ndeclare var __DEBUG__ : boolean;\ndeclare var __ENV__ : string;\n\nconst matches = location.hostname.match(/^(dev|stage)-.*forms.li$/);\nconst env = location.hostname == \"localhost\" ? \"dev\" : (matches && matches.length >= 1 ? matches[1] : \"prod\");\nconst port = location.port && location.port.length > 0 ? `:${location.port}` : \"\";\nconst host = `${location.hostname}${port}`\n\nexport default {\n    env: typeof __ENV__ != \"undefined\" ? __ENV__ :env,\n    debug: typeof __DEBUG__ != \"undefined\" ? __DEBUG__ : (env == \"dev\" || env == \"stage\" || location.search.indexOf(\"$$debug\")),\n    version: typeof __VERSION__ != \"undefined\" ? __VERSION__ : \"6.6.2\",\n    apiHost : typeof __API_HOST__ != \"undefined\" ? __API_HOST__ : host\n}","import { action, computed, observable, toJS } from \"mobx\";\nimport { FormStoreType } from \"../store/FormStore\";\nimport { valueOrDefault } from \"./common\";\nimport { Field } from \"./field\";\nimport { IFieldProps } from \"./field.properties\";\nimport { IValidationError } from \"./validation\";\n\nexport interface IColumn {\n    id  :string;\n    uuid?:string;\n    _type?: string;\n    name?:string;\n    title?:string;\n    span?:number;\n    fields?: IFieldProps[];\n}\n\nexport class Column implements IColumn {\n    readonly _type : string = \"Column\";\n    @observable uuid: string;\n    @observable id: string;\n    @observable name: string;\n    @observable span: number;\n    @observable title: string;\n    @observable fields: Field[];\n    store: FormStoreType;\n\n    @computed get errors() : IValidationError[] {\n        return this.fields.reduce((all: any[], f: Field)=>{\n            return all.concat(f.validator.errors);\n        }, <any[]>[]);\n    }\n\n    @computed get isValid() : boolean {\n        return this.fields.every((f, i) => {\n            return f.isValid;\n        });\n    }\n\n    @computed get idFieldMap() : { [key:string]:Field; } {\n        return this.fields.reduce((all: {}, f: Field)=>{\n            all[f.id] = f;\n            return all;\n        }, {});\n    }\n\n    @computed get uuidFieldMap() : { [key:string]:Field; } {\n        return this.fields.reduce((all: {}, f: Field)=>{\n            all[f.uuid] = f;\n            return all;\n        }, {});\n    }\n\n    @computed get numFields() : number {\n        return this.fields.length;\n    }\n\n    @action addField(field: Field, index?: number) : void {\n        if (typeof index != 'undefined' && index != null && index > -1) {\n            this.fields.splice(index, 0, field);\n        } else {\n            this.fields.push(field);\n        }\n    }\n\n    @action addFields(...fields: Field[]) {\n        fields.forEach((f: Field) => this.addField(f));\n    }\n\n    @action removeField(index: number) {\n        this.fields.splice(index, 1)\n    }\n\n    @action swapFields(index1: number, index2: number): void {\n        let { fields } = this;\n        [fields[index1], fields[index2]] = [fields[index2], fields[index1]];\n    }\n\n    @action moveField(atIndex: number, toIndex: number) {\n        this.fields.splice(toIndex, 0, this.fields.splice(atIndex, 1)[0]);\n    }\n\n    constructor(data: IColumn, store) {\n        this.initialize(data, store);\n    }\n\n    @computed get asPlainObject() : IColumn {\n        let fields = this.fields ?  this.fields.map((f) => {\n            return f.asPlainObject\n        }) : [];\n        return {\n            ...toJS({id: this.id,uuid: this.uuid,span: this.span,name: this.name,title: this.title}),\n            fields: fields\n        };\n    }\n\n    @action initialize(data: IColumn, store: FormStoreType) {\n        this.uuid = data.uuid;\n        this.store = store;\n        this.id = data.id;\n        this.span = data.span;\n        this.name = valueOrDefault(data.name, `${this._type}-${data.id}`);\n        this.title = valueOrDefault(data.title, '');\n        this.fields = valueOrDefault(<Field[]>data.fields, <Field[]>[]);\n    }\n}","const uuidv1 = require('uuid/v1');\n\nexport function valueOrDefault<T>(value: T, defaultValue: T|null): T {\n    return (typeof(value) !== 'undefined' && value !== null ? value : defaultValue);\n}\n","import { action, observable } from \"mobx\";\nimport { FormStoreType } from \"../store/FormStore\";\n\nexport interface IPredicate {\n    uuid?: string;\n    field: string;\n    condition: any;\n    value?: any;\n    operator?: string;\n}\n\nexport class Predicate implements IPredicate {\n    static readonly PredicateConditions = [\"eq\",  \"neq\",  \"gt\",  \"lt\", \"gteq\", \"lteq\", \"hasval\", \"nothasval\"];\n    static readonly PredicateOperators = [\"or\", \"and\"];\n    uuid: string;\n    @observable field: string;\n    @observable condition: string;\n    @observable value: any;\n    @observable operator: string = \"or\";\n    store: FormStoreType;\n\n    @action initialize(data: IPredicate, store: FormStoreType) {\n        if (!data.condition || Predicate.PredicateConditions.indexOf(data.condition) == -1) {\n            throw new Error(`InvalidPredicateCondition - ${data.condition}`);\n        }\n        if(data.operator && Predicate.PredicateOperators.indexOf(data.operator) == -1) {\n            throw new Error(`InvalidPredicateOperator - ${data.operator}`);\n        }\n        this.uuid = data.uuid;\n        this.store = store;\n        this.field = data.field;\n        this.condition = data.condition;\n        this.value = data.value;\n        this.operator = data.operator;\n    }\n\n    constructor(data:IPredicate, store: FormStoreType) {\n        this.initialize(data, store);\n    }\n}","import { action, computed, observable, observe } from \"mobx\";\nimport { FormStoreType } from \"../store/FormStore\";\nimport { IPredicate, Predicate } from \"./condition.predicate\";\n\nexport interface ICondition {\n    predicates: IPredicate[],\n    ancestors?: string[],\n}\n\nexport class Condition {\n    @observable predicates: Predicate[];\n    @observable ancestors?: string[];\n    store: FormStoreType;\n\n    @action initialize(data: ICondition, store: FormStoreType) {\n        let predicates : Predicate[] = [];\n        data.predicates.forEach((p: IPredicate)=> {\n            predicates.push(new Predicate(p, store));\n        })\n        this.predicates = predicates;\n        this.ancestors = [];\n        this.store = store;\n        let self = this;\n\n        this.predicates.forEach((p) => {\n            self.ancestors.push(p.field);\n        });\n    }\n\n    constructor(data: ICondition, store: FormStoreType) {\n        this.initialize(data, store);\n    }\n\n    @action addPredicates(...p : IPredicate[]) {\n        p.forEach((p) => {\n            this.predicates.push(new Predicate(p, this.store));\n            this.ancestors.push(p.field);\n        });\n    }\n\n    reduce(lhs:any, rhs:any, op: string) : boolean {\n        if (op == 'and') {\n            return lhs && rhs;\n        } else {\n            return lhs || rhs;\n        }\n    }\n\n    @computed get value() : boolean {\n        var state: boolean;\n        let self = this;\n\n        if (self.store.conditionsDisabled || !this.predicates || this.predicates.length == 0){\n            return true;\n        }\n\n        this.predicates.forEach((p, i) => {\n            let currentValue = self.store.values[p.field];\n            var result: any = null;\n            switch(p.condition) {\n                case \"eq\":\n                    result = currentValue == p.value;\n                    break;\n                case \"neq\":\n                    result = currentValue != p.value;\n                    break;\n                case \"gt\":\n                    result = currentValue > p.value;\n                    break;\n                case \"lt\":\n                    result = currentValue < p.value;\n                    break;\n                case \"gteq\":\n                    result = currentValue >= p.value;\n                    break;\n                case \"lteq\":\n                    result = currentValue <= p.value;\n                    break;\n                case \"hasval\":\n                    result = typeof(currentValue) != 'undefined' && currentValue != null && currentValue !== \"\";\n                    break;\n                case \"nothasval\":\n                    result = typeof(currentValue) == 'undefined' || currentValue == null || currentValue == \"\";\n                    break;\n                default:\n                    result = false;\n            }\n            state = (i == 0) ? result : this.reduce(state, result, p.operator);\n        });\n        return state;\n    }\n}","import { FormStoreType } from \"../store/FormStore\";\nimport { Column, IColumn } from \"./column\";\nimport { Condition, ICondition } from \"./condition\";\nimport { IPredicate, Predicate } from \"./condition.predicate\";\nimport { Field } from \"./field\";\nimport { IFieldProps, FieldTypes } from \"./field.properties\";\nimport { Form } from \"./form\";\nimport { IFormProps } from \"./form.properties\";\nimport { IPage, Page } from \"./page\";\nimport { ISection, Section } from \"./section\";\nconst uuidv1 = require('uuid/v1');\n\nexport const EmptyForm : IFormProps = {\n    id: null,\n    name: \"Untitled Form\",\n    description: \"Form description\",\n    formLayoutOptions : {\n        showPageTitles : true,\n        showSteps: true,\n        showSectionBorders: false,\n        showPageBorders: false,\n        showSectionTitles: false,\n        validationDisablesPaging: true\n    },\n    layout : \"vertical\",\n    itemLayoutOptions : {\n        labelAlign : \"left\",\n        labelCol : {\"xl\" : {offset:0, span: 8}},\n        wrapperCol : {\"xl\" : {offset:0, span: 16}}\n    },\n    content: {\n        title: \"Form title\",\n        subtitle: \"Form subtitle\"\n    }\n}\n\nexport class Factory {\n    static ensureIds<T>(item: T) {\n        if (!item['uuid']) {\n            item['uuid'] = uuidv1();\n        }\n\n        if(!item['id']) {\n            item['id'] = (1e6 * Math.random()).toFixed(0) + \"\";\n        }\n    }\n\n    static makePredicates(store: FormStoreType, ...predicates: IPredicate[]) : Predicate[] {\n        let response: Predicate[] = [];\n        predicates.forEach((predicate: IPredicate) => {\n            Factory.ensureIds(predicate);\n            response.push(new Predicate(predicate, store));\n        });\n        return response;\n\n    }\n\n    static makeCondition(store: FormStoreType, condition: ICondition) : Condition {\n        let predicates = Factory.makePredicates(store, ...condition.predicates);\n        return new Condition({predicates: predicates}, store);\n    }\n\n    static makeFields(store: FormStoreType, ...fields: IFieldProps[]) : Field[] {\n        if (!fields || fields.length == 0) {\n            return <Field[]>[];\n        }\n        return fields.reduce((r: Field[], f: IFieldProps) => {\n            Factory.ensureIds(f);\n            if(f.inputType == FieldTypes.radiogroup || f.inputType == FieldTypes.checkboxgroup || f.inputType == FieldTypes.select) {\n                if (!f.componentProps) {\n                    f.componentProps = {};\n                }\n                f.componentProps[\"options\"] = f.componentProps[\"options\"] || [];\n            }\n            r.push(new Field({...f, condition: f.condition}, store));\n            return r;\n        }, <Field[]>[]);\n    }\n\n    static makeColumns(store: FormStoreType, ...columns: IColumn[]) : Column[] {\n        let response : Column[] = [];\n        if (!columns || columns.length == 0) {\n            return response;\n        }\n\n        columns.forEach((c: IColumn) => {\n            Factory.ensureIds(c);\n            let fields = c.fields && c.fields.length > 0 ? Factory.makeFields(store, ...c.fields) : <Field[]>[];\n            if (!c.span) {\n                c.span = Math.floor(24/columns.length);\n            }\n            let column = new Column({...c, fields: fields}, store);\n            response.push(column);\n        })\n        return response;\n    }\n\n    static makeSections(store: FormStoreType, ...sections: ISection[]) : Section[] {\n        let response: Section[] = [];\n        if (!sections || sections.length == 0) {\n            return <Section[]>[];\n        }\n        sections.forEach((s: ISection) => {\n            Factory.ensureIds(s);\n            let columns = s.columns && s.columns.length > 0 ? Factory.makeColumns(store, ...s.columns) : <Column[]>[];\n            response.push(new Section({...s, columns: columns}, store));\n        });\n        return response;\n    }\n\n    static makePages(store: FormStoreType, ...pages: IPage[]) : Page[] {\n        if (!pages || pages.length == 0) {\n            return <Page[]>[];\n        }\n        let response: Page[] = [];\n        pages.forEach((page: IPage) => {\n            Factory.ensureIds(page);\n            let sections = page.sections && page.sections.length > 0 ? Factory.makeSections(store, ...page.sections) : <Section[]>[];\n            response.push(new Page({...page, sections: sections}, store));\n        });\n        return response;\n    }\n\n    static makeForm(store: FormStoreType, formData: IFormProps) : Form {\n        let form: Form;\n        if (formData && formData.content && formData.content.pages) {\n            formData.content.pages = Factory.makePages(store, ...formData.content.pages)\n            form = new Form(formData, store);\n        } else {\n            let _formData = formData ? formData : {id: null, content: {pages: []}}\n            form = new Form(_formData, store);\n        }\n        return form;\n    }\n}","import { InputProps } from \"antd/lib/input/Input\";\nimport { CheckboxProps } from \"antd/lib/checkbox/Checkbox\";\nimport { CheckboxGroupProps } from \"antd/lib/checkbox/index\";\nimport { DatePickerProps, RangePickerValue } from \"antd/lib/date-picker/interface\";\nimport { RangePickerProps } from \"antd/lib/date-picker/interface\";\nimport { InputNumberProps} from \"antd/lib/input-number/index\";\nimport { RadioGroupProps, RadioProps } from \"antd/lib/radio/index\";\nimport { SelectProps } from \"antd/lib/select/index\";\nimport { CascaderProps } from \"antd/lib/cascader/index\";\nimport { TransferProps } from \"antd/lib/transfer/index\";\nimport { ICondition } from \"./condition\";\nimport { RateProps } from \"antd/lib/rate/index\";\nimport { SwitchProps } from \"antd/lib/switch/index\";\nimport { SliderProps } from \"antd/lib/slider\";\nimport { TextAreaProps } from \"antd/lib/input\";\nimport { IValidationRule } from \"./validation\";\nimport { IFieldOptions } from \"./field.options\";\nimport { CSSProperties } from 'react';\nimport { IItemLayoutOptions } from './layout';\n\n/* CheckboxGroupProps|CheckboxProps|InputProps  */\nexport class FieldTypes {\n    static text : string = \"text\";\n    static input: string = \"input\";\n    static checkbox: string = \"checkbox\";\n    static number: string = \"number\";\n    static select: string = \"select\";\n    static radiogroup: string = \"radiogroup\";\n    static checkboxgroup: string = \"checkboxgroup\";\n    static textarea: string = \"textarea\";\n    static daterange: string = \"daterange\";\n    static datepicker: string = \"datepicker\";\n    static monthpicker: string = \"monthpicker\";\n    static timepicker: string = \"timepicker\";\n    static yearpicker: string = \"yearpicker\";\n    static rangepicker: string = \"rangepicker\";\n    static rate: string = \"rate\";\n    static slider: string = \"slider\";\n    static textblock : string = \"textblock\";\n}\n\nexport interface IDateDurationConstraint {\n    years? : number;\n    quarters? : number;\n    months?: number;\n    days?: number;\n}\n\nexport interface IDateRangeConstraint {\n    from?: \"now\"|\"start\"|\"end\";\n    relative: IDateDurationConstraint;\n}\n\nexport interface ChoiceOption {\n    label : string;\n    value: any;\n    onChange?: any;\n    disabled?: boolean;\n    children?: ChoiceOption[]\n}\n\nexport interface TransferItem {\n    key : string;\n    title: string;\n    description: string;\n    disabled: boolean;\n}\n\nexport interface IFieldInternalProps {\n    icon?: string;\n    width?: number;\n    children?: any[];\n    showLabel?: boolean;\n    showLegend?: boolean;\n    helpPlacement?: string;\n    queryParam?: string;\n    saveable?: boolean;\n    location?: any;\n}\n\nexport interface IFieldRuntimeProps {\n    /** The following are computed values */\n    readonly isHidden : boolean;\n    readonly className : string;\n    readonly isTouched : boolean;\n    readonly isValidateable : boolean;\n    readonly isValid : boolean;\n    readonly isRequired : boolean;\n    readonly currentValue : any;\n    readonly isDisabled : boolean;\n    readonly serialize: string ;\n}\n\nexport interface ICheckboxProps extends CheckboxProps {\n    defaultChecked? : boolean;\n}\n\n\nexport interface ICheckboxGroupProps extends CheckboxGroupProps {\n    defaultValue?: (string|number|boolean)[],\n    options: ChoiceOption[]\n}\n\nexport interface INumberProps extends InputNumberProps {\n    defaultValue?: number\n}\n\nexport interface IDatePickerProps extends DatePickerProps {\n    dateFormat: string;\n}\n\nexport interface IDateRangeProps extends RangePickerProps {\n    dateFormat : string;\n    startValuePropsName?: string;\n    endValuePropsName?: string;\n    defaultStartValue?: string;\n    defaultEndValue?  : string;\n    minStartDate?: IDateRangeConstraint;\n    maxEndDate?: IDateRangeConstraint;\n    maxRange?: IDateRangeConstraint;\n}\n\nexport interface IInputProps extends InputProps {\n    defaultValue?: string\n}\n\nexport interface IRadioGroupProps extends RadioGroupProps {\n    options: ChoiceOption[]\n}\n\nexport interface IRadioProps extends RadioProps {\n    optionLabel: string;\n    optionValue: string;\n}\n\nexport interface ISelectProps extends SelectProps {\n    options: ChoiceOption[]\n}\n\nexport interface ITransferProps extends TransferProps {\n    maxItems?: number;\n}\n\nexport interface ChoiceOption {\n    label : string;\n    value: any;\n    onChange?: any;\n    disabled?: boolean;\n}\n\nexport interface ICascaderProps extends CascaderProps {\n    defaultValue?: string[]\n}\n\nexport interface IStarRatingProps extends RateProps {\n    defaultValue?: number;\n}\n\nexport interface ISwitchProps extends SwitchProps {\n    defaultChecked?: boolean\n}\n\nexport interface IRangePickerProps extends RangePickerProps {\n    defaultValue?: RangePickerValue;\n}\n\nexport interface IHTMLFragmentProps {\n    fragmentUrl: string;\n    allowForms? : boolean;\n    allowScripts? : boolean;\n    allowPopups? : boolean;\n    className: string;\n    seamless: boolean;\n    style: CSSProperties;\n}\n\nexport interface ISliderProps extends SliderProps {\n\n}\n\nexport interface ITextAreaProps extends TextAreaProps {\n\n}\n\nexport interface ITextBlockProps {\n\n}\n\nexport type IComponentProps = IRangePickerProps | ICheckboxProps|ICheckboxGroupProps|IDatePickerProps|IDateRangeProps|\n                            INumberProps|IRadioGroupProps|ISelectProps|IInputProps|ICascaderProps|\n                            IStarRatingProps|ISwitchProps|ITransferProps|ISliderProps|ITextAreaProps|\n                            ITextBlockProps | IRadioProps | IHTMLFragmentProps;\n\nexport interface IFieldStorage {\n    unique: boolean;\n    name: string;\n    type: string;\n    customerKey: string;\n    description: string;\n    isNullable: boolean;\n    isPrimaryKey: boolean;\n    isRequired: boolean;\n    isSendable: boolean;\n}\n\nexport interface IFieldProps extends IFieldInternalProps {\n    id: string;\n    name: string;\n    children?: any[];\n    uuid?: string;\n    type?: string;\n    label?: string;\n    value? : any;\n\n    inputType : string;\n    helpText? : string;\n    placeholder?: string;\n    condition?: ICondition;\n    storage?: IFieldStorage;\n    validation?: IValidationRule;\n    componentProps: IComponentProps;\n    fieldOptions: IFieldOptions;\n    itemLayoutOptions?: IItemLayoutOptions;\n}","import { action, computed, observable, observe, toJS, autorun } from \"mobx\";\nimport { FormStoreType } from \"../store/FormStore\";\nimport { Condition, ICondition } from \"./condition\";\nimport { IFieldOptions } from \"./field.options\";\nimport { IComponentProps, IFieldProps, IFieldRuntimeProps, IFieldStorage } from \"./field.properties\";\nimport { ItemLayoutOptions } from './layout';\nimport { IValidationRule, ValidationRule } from \"./validation\";\nimport { Validator } from \"./validator\";\nimport { observer } from 'mobx-react-lite';\n\n\nexport class Field implements IFieldProps, IFieldRuntimeProps {\n    readonly _type : string = \"Field\";\n    uuid: string;\n    @observable id: string;\n    @observable name: string;\n\n    @observable type: string;\n    @observable label: string;\n    @observable value : any;\n    @observable touched: boolean;\n    @observable inputType: string;\n    @observable helpText: string;\n    @observable placeholder: string;\n    fieldOptions: IFieldOptions;\n    children: any;\n    @observable condition: Condition;\n    @observable storage: IFieldStorage;\n    store: FormStoreType;\n    @observable location: any;\n    @observable conditionState: boolean;\n    @observable validator : Validator;\n    validation: IValidationRule;\n    @observable componentProps: IComponentProps;\n    @observable itemLayoutOptions : ItemLayoutOptions;\n    _dispose : any;\n\n    @action mergeUpdate(data: Partial<IFieldProps>) {\n        this.id = data.id ? data.id : this.id;\n        this.name = data.name;\n        this.label = data.label;\n        this.helpText = data.helpText;\n        this.placeholder = data.placeholder;\n        let {fieldOptions} = data;\n        this.fieldOptions = {...this.fieldOptions, ...{valuePropName: fieldOptions ? fieldOptions.valuePropName : this.fieldOptions.valuePropName}};\n        this.componentProps = <IComponentProps>{...this.componentProps, ...data.componentProps};\n        return;\n    }\n\n    @action initialize(data: IFieldProps, store: FormStoreType) {\n        this.store = store;\n        this.id = data.id;\n        this.uuid = data.uuid;\n        this.name = data.name || `${this._type}_${data.id}`;\n        this.type = data.type;\n        this.label = data.label;\n        this.inputType = data.inputType;\n        this.fieldOptions = data.fieldOptions ? Object.assign({id: data.id}, {...data.fieldOptions}) : {id: data.id};\n        this.fieldOptions.valuePropName = (data.fieldOptions||{}).valuePropName || this.name;\n        this.validation = data.validation;\n        this.validator = new Validator({rule: new ValidationRule(data.validation), field: this, store: store});\n        this.storage = data.storage;\n        this.label = data.label;\n        this.helpText = data.helpText;\n        this.placeholder = data.placeholder;\n        this.children = data.children || {};\n        this.componentProps = data.componentProps || {};\n        this.location = data.location || {};\n        this.touched = false;\n        this.itemLayoutOptions = new ItemLayoutOptions(data.itemLayoutOptions);\n\n        if (this.componentProps && this.componentProps['defaultValue']) {\n            this.setValue(this.componentProps['defaultValue']);\n        } else if (this.componentProps && this.componentProps['defaultChecked']) {\n            this.setValue(this.componentProps['defaultChecked']);\n        }\n\n        if (!this.fieldOptions.valuePropName) {\n            this.fieldOptions.valuePropName = `${this.id}_value`;\n        }\n\n        if(this.inputType == 'daterange') {\n            this.componentProps[\"startValuePropsName\"] = !!this.componentProps[\"startValuePropsName\"] ? this.componentProps[\"startValuePropsName\"] : `start_date`;\n            this.componentProps[\"endValuePropsName\"] = !!this.componentProps[\"endValuePropsName\"] ? this.componentProps[\"endValuePropsName\"] : `end_date`;\n        }\n\n        if (data.condition) {\n            this.setCondition(data.condition);\n        } else {\n            this.condition = null;\n            this.conditionState = true;\n        }\n        this.validate();\n        return;\n    }\n\n    @computed get className() : string {\n        return `.fl-field .fl-${this.inputType}${this.type?'-'+this.type:''}`;\n    }\n\n    @computed get isTouched() : boolean {\n        return this.store.touched[this.id];\n    }\n\n    @computed get isValidateable() {\n        return this.validator.isValidateable;\n    }\n\n    @computed get isValid() : boolean {\n        return this.validator.isValid;\n    }\n\n    @computed get isHidden() : boolean {\n        return this.inputType == \"hidden\";\n    }\n\n    @computed get isRequired() : boolean {\n        return !!this.validator.rule.presence;\n    }\n\n    @computed get currentValue() {\n        return this.value\n    }\n\n    @computed get isDisabled() : boolean {\n        return !this.conditionState;\n    }\n\n    @action setValue(value: any) {\n        this.value = value;\n        this.store.setFieldValue(this.id, value);\n        this.validate();\n    }\n\n    @action setTouched() {\n        this.touched = true;\n        this.store.setFieldTouched(this.id);\n        this.validate();\n    }\n\n    @action setConditionState(value: boolean) {\n        this.conditionState = value;\n        this.validate();\n    }\n\n    @action setCondition(condition: ICondition) {\n        if(condition == null || !condition.predicates || condition.predicates.length == 0) {\n            this.condition = null;\n            this.conditionState = true;\n            if(this._dispose) {\n                this._dispose();\n            }\n            this.validate();\n            return;\n        }\n\n        this.condition = new Condition(condition, this.store);\n        this.conditionState = this.condition.value;\n\n        this._dispose = observe(this.condition, \"value\", (change) => {\n            this.setConditionState(change.newValue)\n            if(change.newValue == true) {\n                this.validate();\n            }\n        }, true);\n    }\n\n    @action validate() {\n\n       this.validator.validate();\n    }\n\n    @computed get asPlainObject() : IFieldProps {\n        let clone = {...this};\n        delete clone.store;\n        delete clone.validator;\n        clone.value = null;\n        clone.conditionState = false;\n        return toJS(clone, {recurseEverything: true, detectCycles: true});\n    }\n\n    @computed get serialize(): string  {\n        let clone = this.asPlainObject;\n        return JSON.stringify(clone);\n    }\n\n    constructor(data: IFieldProps, store: FormStoreType) {\n        this.initialize(data, store);\n    }\n}","import axios from \"axios\";\nimport { action, computed, observable, toJS } from \"mobx\";\nimport { FormEvent } from \"react\";\nimport { FormStoreType } from \"../store/FormStore\";\nimport { valueOrDefault } from \"./common\";\nimport { Field } from \"./field\";\nimport { IFormContent, IFormProps, IFormStatus, IFormTenant } from \"./form.properties\";\nimport { FormLayoutOptions, ItemLayoutOptions } from './layout';\nimport { Page } from \"./page\";\nimport { IValidationError } from \"./validation\";\n\nexport enum SubmitState {\n    NOT_SUBMITTED = \"Not Submitted\",\n    SUBMITTING = \"Submitting\",\n    SUCCESS = \"Success\",\n    ERROR = \"Error\"\n}\n\nexport enum SubmitResultType {\n    AWAITING_SUBMIT = \"Awaiting Submit\",\n    SUCCESS_REDIRECT = \"Success Redirect\",\n    ERROR_REDIRECT = \"Error Redirect\",\n    DEFAULT_SUCCESS_MESSAGE = \"Default Success Message\",\n    DEFAULT_ERROR_MESSAGE = \"Default Error Message\",\n    USER_SUCCESS_MESSAGE = \"User Success Message\",\n    USER_ERROR_MESSAGE = \"User Error Message\"\n}\n\nexport class Form implements IFormProps {\n    store: FormStoreType\n    uuid: string;\n\n    @observable id: string;\n    @observable exid: string;\n    @observable description: string;\n    @observable name: string;\n    @observable tenant: IFormTenant;\n    @observable status: IFormStatus;\n    @observable content: IFormContent;\n    @observable layout: any;\n    @observable submitTarget: string;\n    @observable submitError: string;\n    @observable formLayoutOptions: FormLayoutOptions;\n    @observable itemLayoutOptions: ItemLayoutOptions;\n    @observable successRedirect: string;\n    @observable errorRedirect: string;\n    @observable submitSuccessMessage?: string;\n    @observable submitErrorMessage?: string;\n    @observable submitState: SubmitState = SubmitState.NOT_SUBMITTED;\n\n    @action initialize(data: IFormProps, store: FormStoreType) {\n        this.store = store;\n        this.id = data.id;\n        this.name = data.name;\n        this.uuid = data.uuid;\n        this.exid = valueOrDefault(data.exid, null);\n        this.description = valueOrDefault(data.description, null);\n        this.submitTarget = data.submitTarget;\n        this.successRedirect = data.successRedirect;\n        this.errorRedirect = data.errorRedirect;\n        this.submitErrorMessage = data.submitErrorMessage;\n        this.submitSuccessMessage = data.submitErrorMessage;\n        if (data.content) {\n            this.content = {\n                title: valueOrDefault(data.content.title, null),\n                subtitle: valueOrDefault(data.content.subtitle, null),\n                labels: valueOrDefault(data.content.labels, null),\n                offset: valueOrDefault(data.content.offset, null),\n                width: valueOrDefault(data.content.width, null),\n                sidebar: valueOrDefault(data.content.sidebar, null),\n                scripts: valueOrDefault(data.content.scripts, null),\n                styles: valueOrDefault(data.content.styles, null),\n                datasets: valueOrDefault(data.content.datasets, null),\n                pages: valueOrDefault(<Page[]>data.content.pages, []),\n                paginate: valueOrDefault(data.content.paginate, false)\n            }\n            if (data.content.css) {\n                this.content.css = {\n                    inline : valueOrDefault(data.content.css.inline, []),\n                    external: valueOrDefault(data.content.css.external, [])\n                }\n            } else {\n                this.content.css = {inline: null, external: null}\n            }\n            if (data.content.header) {\n                this.content.header = {\n                    rows: valueOrDefault(data.content.header.rows, [])\n                }\n            } else {\n                this.content.header = {rows: []}\n            }\n\n            if (data.content.footer) {\n                this.content.footer = {\n                    rows: valueOrDefault(data.content.footer.rows, [])\n                }\n            } else {\n                this.content.footer = {rows: []}\n            }\n\n            if (data.content.trackingPixels) {\n                this.content.trackingPixels = data.content.trackingPixels;\n            } else {\n                this.content.trackingPixels = []\n            }\n        } else {\n            this.content = {\n                title: null,\n                subtitle: null,\n                labels: null,\n                offset: null,\n                width: null,\n                sidebar: null,\n                scripts: [],\n                styles: [],\n                datasets: [],\n                pages: [],\n                paginate: true\n            }\n            this.content.css = {inline: null, external: null}\n            this.content.header = {rows: []}\n            this.content.footer = {rows: []}\n            this.content.trackingPixels = [];\n        }\n\n        this.layout = valueOrDefault(data.layout, \"vertical\");\n        this.formLayoutOptions = new FormLayoutOptions(data.formLayoutOptions);\n        this.itemLayoutOptions = new ItemLayoutOptions(data.itemLayoutOptions);\n    }\n\n    constructor(data: IFormProps, store: FormStoreType) {\n        this.initialize(data, store);\n    }\n\n    @computed get isValid() : boolean {\n        return this.content.pages.every((p: Page) => {\n            return p.isValid;\n        })\n    }\n\n    @computed get numPages() : number {\n        return this.content.pages.length;\n    }\n\n    @computed get numFields() : number {\n        return this.content.pages.reduce((total: number, p: Page) => {\n            return total + p.numFields;\n        }, 0);\n    }\n\n    @action addPage(p : Page, index?: number) {\n        if (typeof index != 'undefined' && index != null && index > -1) {\n            this.content.pages.splice(index, 0, p);\n        } else {\n            this.content.pages.push(p)\n        }\n    }\n\n    @action removePage(index: number) : void {\n        this.content.pages.splice(index, 1);\n    }\n\n    @action swapPages(index1: number, index2: number): void {\n        let { pages } = this.content;\n        [pages[index1], pages[index2]] = [pages[index2], pages[index1]];\n    }\n\n    @action movePage(atIndex: number, toIndex: number) : void {\n        this.content.pages.splice(toIndex, 0, this.content.pages.splice(atIndex, 1)[0]);\n    }\n\n    @computed get isSubmittable() : boolean {\n        if(this.store.preventSubmit) {\n            return false;\n        }\n        let validSubmitState = this.submitState == SubmitState.ERROR || this.submitState == SubmitState.NOT_SUBMITTED;\n        return validSubmitState && !!this.submitTarget && this.errors.length == 0;\n    }\n\n    @computed get idFieldMap() : { [key:string]:Field; }  {\n        return this.content.pages.reduce((all: {}, s: Page)=>{\n            return {...all, ...s.idFieldMap}\n        }, {});\n    }\n\n    @computed get uuidFieldMap() : { [key:string]:Field; }  {\n        return this.content.pages.reduce((all: {}, s: Page)=>{\n            return {...all, ...s.uuidFieldMap}\n        }, {});\n    }\n\n    @computed get errors() : IValidationError[] {\n        return this.content.pages.reduce((all: any[], p: Page)=>{\n            return all.concat(p.errors);\n        }, <any[]>[]);\n    }\n\n    @computed get values() : { [key:string]: any; } {\n        return Object.keys(this.idFieldMap).reduce((all: {}, id: string) => {\n            let f: Field = this.idFieldMap[id];\n            // HTMLFragment and TextBlock have no value\n            if (f.inputType ==  'htmlfragment' || f.inputType == 'textblock') {\n                return all;\n            }\n            return {...all, [f.id]: f.value}\n        }, {});\n    }\n\n    @computed get asPlainObject() {\n        let clone : IFormProps = toJS({\n            id: this.id,\n            name: this.name,\n            uuid: this.uuid,\n            exid: this.exid,\n            description: this.description,\n            layout : this.layout,\n            formLayoutOptions : this.formLayoutOptions,\n            itemLayoutOptions : this.itemLayoutOptions,\n            submitTarget : this.submitTarget,\n            errorRedirect : this.errorRedirect,\n            successRedirect : this.successRedirect,\n            submitErrorMessage : this.submitErrorMessage,\n            submitSuccessMessage : this.submitErrorMessage\n        }, {detectCycles : true, recurseEverything: true})\n\n        if (this.content) {\n            clone.content = {\n                ...toJS({\n                    title : this.content.title,\n                    subtitle : this.content.subtitle,\n                    labels : this.content.labels,\n                    offset : this.content.offset,\n                    width : this.content.width,\n                    sidebar : this.content.sidebar,\n                    scripts : this.content.scripts,\n                    styles : this.content.styles,\n                    datasets : this.content.datasets,\n                    paginate : this.content.paginate\n                }, {detectCycles : true, recurseEverything: true}),\n                pages : this.content.pages ? (this.content.pages as Page[]).map((p) => {return p.asPlainObject}) : []\n            }\n        }\n        return clone;\n    }\n\n    @computed get submitResultType() : SubmitResultType {\n        if (this.submitState == SubmitState.NOT_SUBMITTED || this.submitState == SubmitState.SUBMITTING) {\n            return SubmitResultType.AWAITING_SUBMIT;\n        }\n        if(this.submitState == SubmitState.SUCCESS) {\n            return this.submitSuccessMessage ? SubmitResultType.USER_SUCCESS_MESSAGE : SubmitResultType.DEFAULT_SUCCESS_MESSAGE;\n        } else {\n            return this.submitErrorMessage ? SubmitResultType.USER_ERROR_MESSAGE : SubmitResultType.DEFAULT_ERROR_MESSAGE;\n        }\n    }\n\n    @action.bound async handleSubmit(e: FormEvent) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.store.setSubmitting(true);\n        let meta = this.idFieldMap;\n        let payload = {};\n        let values = this.values;\n        Object.keys(values).forEach((id: string) => {\n            let key = meta[id].fieldOptions.valuePropName || meta[id].name;\n            payload[key] = values[id];\n        });\n        let self = this;\n        if(this.isSubmittable && !!this.submitTarget) {\n            self.submitState = SubmitState.SUBMITTING;\n            try {\n                await axios.post(self.submitTarget, payload);\n                if(!self.store.preventRedirects && self.successRedirect) {\n                    window.location.href = self.successRedirect;\n                } else {\n                    self.submitState = SubmitState.SUCCESS;\n                    self.submitError = null;\n                }\n            } catch (error) {\n                if (!self.store.preventRedirects && self.errorRedirect) {\n                    window.location.href = self.errorRedirect;\n                } else {\n                    self.submitState = SubmitState.ERROR;\n                    self.submitError = error;\n                }\n            }\n        }\n    }\n}","import { observable, action, computed } from \"mobx\";\nimport {valueOrDefault} from \"./common\";\n\nexport type ScreenWidth = \"xs\"|\"sm\"|\"md\"|\"lg\"|\"xl\";\nexport const AllScreenWidths: ScreenWidth[] = [\"xs\",\"sm\",\"md\",\"lg\",\"xl\"];\n\nexport interface ColSpanOffset {\n    span: number;\n    offset?: number;\n}\n\nexport interface ILayoutOption {\n    xs?  : ColSpanOffset;\n    sm?  : ColSpanOffset;\n    md?  : ColSpanOffset;\n    lg?  : ColSpanOffset;\n    xl?  : ColSpanOffset;\n}\nexport class LayoutOption implements ILayoutOption {\n    @observable xs  : ColSpanOffset;\n    @observable sm  : ColSpanOffset;\n    @observable md  : ColSpanOffset;\n    @observable lg  : ColSpanOffset;\n    @observable xl  : ColSpanOffset;\n\n    constructor(props: {[key in ScreenWidth]?: ColSpanOffset}={}) {\n        Object.keys(props).map((width: ScreenWidth) => {\n            if(AllScreenWidths.indexOf(width) > -1 && props[width]){\n                this[width] = props[width];\n            }\n        })\n    }\n\n    @computed get unused() : ScreenWidth[] {\n        return AllScreenWidths.filter((d) => {\n            return typeof this[d] == 'undefined' || this[d] == null\n        })\n    }\n\n    @computed get used() : ScreenWidth[] {\n        return AllScreenWidths.filter((d) => {\n            return typeof this[d] != 'undefined' && this[d] != null\n        })\n    }\n\n    add(dimension: ScreenWidth, colspan: ColSpanOffset) {\n        this[dimension] = colspan;\n    }\n\n}\n\nexport interface IFormLayoutOptions {\n    showSteps?: boolean,\n    showPageTitles?: boolean,\n    showSectionTitles?: boolean,\n    showSectionBorders? : boolean,\n    showPageBorders?: boolean,\n    validationDisablesPaging?: boolean;\n    labelAlign?: \"left\" | \"right\";\n    wrapperCol?: ColSpanOffset;\n    labelCol?: ColSpanOffset;\n}\n\nexport class FormLayoutOptions implements IFormLayoutOptions {\n    @observable showSteps: boolean;\n    @observable showPageTitles: boolean\n    @observable showSectionTitles: boolean\n    @observable showSectionBorders : boolean\n    @observable showPageBorders: boolean\n    @observable validationDisablesPaging: boolean\n    @observable labelAlign: \"left\" | \"right\"\n    @observable wrapperCol: ColSpanOffset\n    @observable labelCol: ColSpanOffset\n\n    constructor(props: IFormLayoutOptions) {\n        this.initialize(props);\n    }\n\n    @action initialize(props: IFormLayoutOptions) {\n        if(!props) {\n            return;\n        }\n        this.showSteps = valueOrDefault(props.showSteps, true);\n        this.showPageTitles = valueOrDefault(props.showPageTitles, true);\n        this.showSectionTitles = valueOrDefault(props.showSectionTitles, false);\n        this.showSectionBorders = valueOrDefault(props.showSectionBorders, false);\n        this.showPageBorders = valueOrDefault(props.showPageBorders, false);\n        this.validationDisablesPaging = valueOrDefault(props.validationDisablesPaging, true);\n        this.labelAlign = valueOrDefault(props.labelAlign, \"left\");\n        this.wrapperCol = valueOrDefault(props.wrapperCol, {span: 8});\n        this.labelCol = valueOrDefault(props.labelCol, {span: 6});\n    }\n}\n\nexport interface IItemLayoutOptions {\n    labelAlign? : \"left\"|\"right\";\n    labelCol?: ILayoutOption;\n    wrapperCol?: ILayoutOption;\n}\n\nexport class ItemLayoutOptions implements IItemLayoutOptions {\n    @observable labelAlign : \"left\"|\"right\";\n    @observable labelCol: LayoutOption;\n    @observable wrapperCol: LayoutOption;\n\n    @action initialize(props: IItemLayoutOptions) {\n        if(!props) {\n            return;\n        }\n        this.labelAlign = valueOrDefault(props.labelAlign, \"left\");\n        this.wrapperCol = new LayoutOption(props.wrapperCol);\n        this.labelCol = new LayoutOption(props.labelCol);\n    }\n\n    constructor(props: IItemLayoutOptions) {\n        this.initialize(props);\n    }\n}\n\n// export type ColumnLayout = { [key in ScreenWidth]?: ColSpanOffset };","import { action, computed, observable, toJS } from \"mobx\";\nimport { FormStoreType } from \"../store/FormStore\";\nimport { Column } from \"./column\";\nimport { valueOrDefault } from \"./common\";\nimport { Field } from \"./field\";\nimport { ISection, Section } from \"./section\";\nimport { IValidationError } from \"./validation\";\n\nexport interface IPage {\n    id: string;\n    uuid?:string;\n    name: string;\n    icon?: string;\n    sections: ISection[];\n    title?: string;\n    subtitle?: string;\n}\n\nexport class Page implements IPage {\n    readonly _type : string = \"Page\";\n    @observable id: string;\n    @observable uuid: string;\n    @observable name: string;\n    @observable icon: string;\n    @observable sections: Section[];\n    @observable title: string;\n    @observable subtitle: string;\n    store: FormStoreType;\n\n    @computed get fieldNames() : string[] {\n        let fieldNames: string[] = [];\n        if (!this.sections || this.sections.length == 0) {\n            return fieldNames;\n        }\n        this.sections.forEach((section: Section)=>{\n            if (section.columns && section.columns.length > 0) {\n                section.columns.forEach((column: Column) => {\n                    if (column.fields) {\n                        column.fields.forEach((field: Field)=> {\n                            fieldNames.push(field.name);\n                        });\n                    }\n                })\n            }\n        });\n        return fieldNames;\n    }\n\n\n    @computed get fieldIds() : string[] {\n        let fieldIds: string[] = [];\n        if (!this.sections || this.sections.length == 0) {\n            return fieldIds;\n        }\n        this.sections.forEach((section: Section)=>{\n            if (section.columns && section.columns.length > 0) {\n                section.columns.forEach((column: Column) => {\n                    if (column.fields) {\n                        column.fields.forEach((field: Field)=> {\n                            fieldIds.push(field.id);\n                        });\n                    }\n                })\n            }\n        });\n        return fieldIds;\n    }\n\n    @computed get idFieldMap() : { [key:string]:Field; }  {\n        return this.sections.reduce((all: {}, s: Section)=>{\n            return {...all, ...s.idFieldMap}\n        }, {});\n    }\n\n    @computed get uuidFieldMap() : { [key:string]:Field; }  {\n        return this.sections.reduce((all: {}, s: Section)=>{\n            return {...all, ...s.uuidFieldMap}\n        }, {});\n    }\n\n    @computed get errors() : IValidationError[] {\n        return this.sections.reduce((all: any[], s: Section)=>{\n            return all.concat(s.errors);\n        }, <any[]>[]);\n    }\n\n    @computed get isValid() : boolean {\n        return this.sections.every((s) => {\n            return s.isValid;\n        });\n    }\n\n    @computed get numSections() : number {\n        return this.sections.length;\n    }\n\n    @computed get numFields() : number {\n        return this.sections.reduce((total: number, s : Section) => {\n            return total + s.numFields;\n        }, 0);\n    }\n\n    @action addSection(section: Section, index?: number) : void {\n        if (typeof index != 'undefined' && index != null && index > -1) {\n            this.sections.splice(index, 0, section);\n        } else {\n            this.sections.push(section);\n        }\n    }\n\n    @action removeSection(index: number) {\n        this.sections.splice(index, 1)\n    }\n\n    @action swapSections(index1: number, index2: number): void {\n        let { sections } = this;\n        [sections[index1], sections[index2]] = [sections[index2], sections[index1]];\n    }\n\n    @action moveSection(atIndex: number, toIndex: number) {\n        this.sections.splice(toIndex, 0, this.sections.splice(atIndex, 1)[0]);\n    }\n\n    @computed get asPlainObject() : IPage {\n        let sections = this.sections ? this.sections.map((s) => {return s.asPlainObject}) : [];\n\n        return {\n            ...toJS({id : this.id,\n                uuid : this.uuid,\n                name : this.name,\n                title : this.title,\n                subtitle : this.subtitle,\n                icon : this.icon\n            }),\n            sections: sections\n        }\n    }\n\n    @action private initialize(data: IPage, store: FormStoreType) {\n        this.id = data.id;\n        this.store = store;\n        this.uuid = data.uuid;\n        this.name = valueOrDefault(data.name, `${this._type}-${data.id}`);\n        this.icon = valueOrDefault(data.name, \"\");\n        this.sections = valueOrDefault(<Section[]>data.sections, <Section[]>[]);\n        this.title = valueOrDefault(data.title, \"\");\n        this.subtitle = valueOrDefault(data.subtitle, \"\");\n    }\n\n    constructor (data: IPage, store: FormStoreType) {\n        this.initialize(data, store);\n    }\n}","import { action, computed, observable, toJS } from \"mobx\";\nimport { FormStoreType } from \"../store/FormStore\";\nimport { Column, IColumn } from \"./column\";\nimport { valueOrDefault } from \"./common\";\nimport { Field } from \"./field\";\nimport { IValidationError } from \"./validation\";\n\nexport interface ISection {\n    id: string;\n    uuid?:string;\n    name: string;\n    title?: string;\n    gutter?:number;\n    columns: IColumn[];\n}\n\nexport class Section implements ISection {\n    readonly _type : string = \"Section\";\n    @observable id: string;\n    @observable uuid:string;\n    @observable name: string;\n    @observable title: string;\n    @observable gutter: number;\n    @observable columns: Column[];\n    store: FormStoreType;\n\n    @computed get errors() : IValidationError[] {\n        return this.columns.reduce((all: any[], c: Column) => {\n            return all.concat(c.errors);\n        }, <any[]>[]);\n    }\n\n    @computed get numFields() : number {\n        return this.columns.reduce((total: number, column: Column) => {\n            total = total + column.numFields;\n            return total;\n        }, 0);\n    }\n\n    @action addColumn(column: Column, index?: number) : void {\n        if(!column.span) {\n            column.span = 6;\n        }\n        if (typeof index != 'undefined' && index != null && index > -1) {\n            this.columns.splice(index, 0, column);\n        } else {\n            this.columns.push(column);\n        }\n    }\n\n    @action removeColumn(index: number) {\n        this.columns.splice(index, 1)\n    }\n\n    @action swapColumns(index1: number, index2: number): void {\n        let { columns } = this;\n        [columns[index1], columns[index2]] = [columns[index2], columns[index1]];\n    }\n\n    @action moveColumn(atIndex: number, toIndex: number) {\n        this.columns.splice(toIndex, 0, this.columns.splice(atIndex, 1)[0]);\n    }\n\n    @computed get numColumns() : number {\n        return this.columns.length;\n    }\n\n    @computed get isValid() : boolean {\n        return this.columns.every((c) => {\n            return c.isValid;\n        });\n    }\n\n    @computed get idFieldMap() : { [key:string]: Field; } {\n        return this.columns.reduce((all: {}, c: Column)=>{\n            return {...all, ...c.idFieldMap}\n        }, {});\n    }\n\n    @computed get uuidFieldMap() : { [key:string]: Field; } {\n        return this.columns.reduce((all: {}, c: Column)=>{\n            return {...all, ...c.uuidFieldMap}\n        }, {});\n    }\n\n    @computed get asPlainObject() : ISection {\n        let columns = this.columns ? this.columns.map((c) => {\n            return c.asPlainObject\n        }) : [];\n        return {\n            ...toJS({id: this.\n                id,uuid:\n                this.uuid,\n                name: this.name,\n                title: this.title,\n                gutter: this.gutter\n            })\n            , columns: columns\n        };\n    }\n\n    @action initialize(data: ISection, store: FormStoreType) {\n        this.id = data.id;\n        this.uuid = data.uuid;\n        this.name = valueOrDefault(data.name, `${this._type}-${data.id}`);\n        this.title = valueOrDefault(data.title, '');\n        this.gutter = valueOrDefault(data.gutter, 16);\n        this.columns = valueOrDefault(<Column[]>data.columns, <Column[]>[]);\n        this.store = store;\n    }\n\n    constructor(data: ISection, store: FormStoreType) {\n        this.initialize(data, store);\n    }\n}","import { action, computed, observable, toJS } from \"mobx\";\nimport { DateConstraint, DateTimeConstraint, EmailConstraint, EqualityConstraint, ExclusionConstraint, FormatConstraint, GenericConstraint, InclusionConstraint, LengthConstraint, NumericalityConstraint, PresenceConstraint, URLConstraint } from \"./validation.constraints\";\n\n\nexport interface IValidationRule {\n    date? : DateConstraint,\n    datetime? : DateTimeConstraint,\n    email?: EmailConstraint,\n    equality?: EqualityConstraint,\n    exclusion?: ExclusionConstraint,\n    format?: FormatConstraint,\n    inclusion?: InclusionConstraint,\n    length?: LengthConstraint,\n    numericality?: NumericalityConstraint,\n    presence?: PresenceConstraint,\n    url?: URLConstraint\n}\n\nexport const ValidationAllowedRules = {\n    \"input\"       : [\"email\", \"equality\", \"format\", \"inclusion\", \"length\", \"presence\", \"url\"],\n    \"checkbox\"    : [\"presence\"],\n    \"number\"      : [\"presence\", \"equality\", \"format\"],\n    \"select\"      : [\"presence\"],\n    \"cascader\"    : [\"presence\"],\n    \"radiogroup\"  : [\"presence\"],\n    \"checkboxgroup\": [\"presence\"],\n    \"textarea\"    : [\"email\", \"equality\", \"format\", \"inclusion\", \"length\", \"presence\", \"url\"],\n    \"daterange\"   : [\"presence\", \"date\", \"datetime\"],\n    \"datepicker\"  : [\"presence\", \"date\", \"datetime\"],\n    \"monthpicker\" : [\"presence\", \"date\", \"datetime\"],\n    \"timepicker\"  : [\"presence\", \"date\", \"datetime\"],\n    \"yearpicker\"  : [\"presence\", \"date\", \"datetime\"],\n    \"starrating\"  : [\"presence\"],\n    \"switch\"      : [\"presence\"],\n    \"transfer\"    : [\"presence\"],\n    \"slider\"      : [\"presence\"],\n    \"textblock\"   : [],\n    \"hidden\"      : [],\n    \"htmlfragment\": [],\n}\n\nexport const ValidationRuleNames = [\n    {key: \"date\", label: \"Date\", value: \"date\"},\n    {key: \"datetime\", label: \"Datetime\", value: \"datetime\"},\n    {key: \"email\", label: \"Email\", value: \"email\"},\n    {key: \"equality\", label: \"Equals\", value: \"equality\"},\n    {key: \"exclusion\", label: \"Excludes\", value: \"exclusion\"},\n    {key: \"format\", label: \"Matches\", value: \"format\"},\n    {key: \"inclusion\", label: \"Includes\", value: \"inclusion\"},\n    {key: \"length\", label: \"Length\", value: \"length\"},\n    {key: \"numericality\", label: \"Numeric\", value: \"numericality\"},\n    {key: \"presence\", label: \"Present\", value: \"presence\"},\n    {key: \"url\", label: \"URL\", value: \"url\"}\n];\n\nexport const ValidationRuleMap = {\n    \"date\": \"Date\",\n    \"datetime\": \"Datetime\",\n    \"email\": \"Email\",\n    \"equality\": \"Equals\",\n    \"exclusion\": \"Excludes\",\n    \"format\": \"Matches\",\n    \"inclusion\": \"Includes\",\n    \"length\": \"Length\",\n    \"numericality\": \"Numeric\",\n    \"presence\": \"Present\",\n    \"url\": \"URL\"\n};\n\nexport interface IValidationError {\n    id: string,\n    name: string,\n    message: string,\n    prefixedMessage: string,\n    validator: string\n}\n\nexport class ValidationRule implements IValidationRule {\n    @observable date : DateConstraint\n    @observable datetime : DateTimeConstraint\n    @observable email: EmailConstraint\n    @observable equality: EqualityConstraint\n    @observable exclusion: ExclusionConstraint\n    @observable format: FormatConstraint\n    @observable inclusion: InclusionConstraint\n    @observable length: LengthConstraint\n    @observable numericality: NumericalityConstraint\n    @observable presence: PresenceConstraint\n    @observable url: URLConstraint\n\n    constructor(rule: IValidationRule) {\n        this.initialize(rule);\n    }\n\n    @action initialize(rule: IValidationRule = {}) {\n        this.date = rule.date;\n        this.datetime = rule.datetime;\n        this.email = rule.email;\n        this.equality = rule.equality;\n        this.exclusion = rule.exclusion;\n        this.format = rule.format;\n        this.inclusion = rule.inclusion;\n        this.length = rule.length;\n        this.numericality = rule.numericality;\n        this.presence = rule.presence;\n        this.url = rule.url;\n    }\n\n    @computed get constraints() : IValidationRule {\n        let c = {};\n        Object.keys(ValidationRuleMap).forEach((rule: string) => {\n            if (this[rule]) {\n                c[rule] = toJS(this[rule]);\n            }\n        })\n        return c;\n    }\n    @action addConstraint(key: string, settings: GenericConstraint) {\n        this[key] = settings;\n    }\n\n    @action updateConstraint(key: string, settings: GenericConstraint) {\n        this[key] = settings;\n    }\n\n    @action removeConstraint(key: string) {\n        this[key] = null;\n    }\n}","import {action, decorate, observable, computed, toJS} from \"mobx\";\nimport { FormStoreType } from \"../store/FormStore\";\nimport moment from 'moment'\nimport {Field} from \"./field\";\nimport {ValidationRule, IValidationError, IValidationRule} from \"./validation\";\n\nvar validate = require(\"validate.js\");\n\nvalidate.extend(validate.validators.datetime, {\n    // The value is guaranteed not to be null or undefined but otherwise it\n    // could be anything.\n    parse: function(value, options) : number {\n      return +moment.utc(value);\n    },\n    // Input is a unix timestamp\n    format: function(value: moment.MomentInput, options: any = {}) : string {\n      var format = options.dateOnly ? \"YYYY-MM-DD\" : \"YYYY-MM-DD hh:mm:ss\";\n      return moment.utc(value).format(format);\n    }\n});\n\nexport interface IValidationProps {\n    store: FormStoreType,\n    field: Field,\n    rule: IValidationRule\n}\n\nexport class Validator {\n    store: FormStoreType;\n    field: Field;\n    @observable rule : ValidationRule;\n    @observable validationErrors: IValidationError[] = [];\n\n    @computed get isValid() : boolean {\n        return this.validationErrors.length == 0;\n    }\n\n    @computed get errors() : IValidationError[] {\n        return this.validationErrors;\n    }\n\n    formatError(errors: any): IValidationError {\n        return errors.map((e: any) => {\n            let prefixedMessage = e.error || \"\";\n            let unPrefixedMessage = e.error ? e.error.replace(`${e.attribute.toUpperCase()} `, \"\") : e.options.message;\n            return {id: this.field.id,\n                name: e.attribute,\n                message: unPrefixedMessage,\n                prefixedMessage: prefixedMessage,\n                validator: e.validator\n            };\n        });\n    }\n\n    @computed get isValidateable() {\n        let {field} = this;\n        return !this.store.validationDisabled && !field.isHidden && field.conditionState && !!this.rule && Object.keys(this.rule).length > 0;\n    }\n\n    @action validate() {\n        if (this.isValidateable == true) {\n            let {field, store} = this;\n            let {id} = field;\n            let constraints = {};\n            constraints[field.id] = this.rule.constraints;\n            validate.formatters.custom = this.formatError.bind(this);\n            let values = toJS(store.values);\n\n            this.validationErrors = validate(values, constraints, {format: \"custom\"}) || [];\n            if (this.validationErrors.length > 0) {\n                this.store.setFieldError(id, this.validationErrors[0].message);\n            } else {\n                this.store.setFieldError(id, undefined);\n            }\n        } else {\n            this.validationErrors = [];\n        }\n    }\n\n    @computed get isRequired() : boolean {\n        return !!this.rule.presence;\n    }\n\n    @action initialize(data: IValidationProps) {\n        this.rule = new ValidationRule(data.rule || {} as IValidationRule);\n        this.store = data.store;\n        this.field = data.field;\n    }\n\n    constructor(data: IValidationProps) {\n        this.initialize(data);\n    }\n}","import { observable } from \"mobx\";\nimport { Field } from \"../models/field\";\nimport { Form } from \"../models/form\";\nimport { Page } from \"../models/page\";\nimport config from \"../config\";\n\nexport const createFormStore = () => {\n    const store = {\n        env : config.env,\n        debug : config.debug,\n        version: config.version,\n        apiHost: config.apiHost,\n        errors : {},\n        values: {},\n        touched: {},\n        currentPage: 0,\n        showDebug: false,\n        form :<Form> null,\n        isReady: false,\n        submitting: false,\n        validationDisabled: false,\n        conditionsDisabled: false,\n        preventRedirects : false,\n        preventSubmit : false,\n        toggleShowDebug: function () {\n            this.showDebug = !this.showDebug;\n        },\n        get idFieldMap() : { [key:string]:Field; } {\n            if (!this.form) {\n                return {}\n            }\n            return this.form.content.pages.reduce((all: {}, p: Page) => {\n                return {...all, ...p.idFieldMap};\n            }, {});\n        },\n        get uuidFieldMap() : { [key:string]:Field; } {\n            if (!this.form) {\n                return {}\n            }\n            return this.form.content.pages.reduce((all: {}, p: Page) => {\n                return {...all, ...p.uuidFieldMap};\n            }, {});\n        },\n        get fieldNames() : string[] {\n            if (!this.form) {\n                return []\n            }\n            return this.form.content.pages.reduce((all: string[], p: Page) => {\n                return all.concat(p.fieldNames);\n            }, <string[]>[])\n        },\n        get isValid() : boolean {\n            if (this.form && this.form.content && this.form.content.pages && this.form.content.pages.length > 0) {\n                return this.form.content.pages.every((p: Page) => {\n                    return p.isValid\n                })\n            } else {\n                return true;\n            }\n        },\n        setSubmitting(value: boolean) {\n            this.submitting = value;\n        },\n        get isSubmitting() : boolean {\n            return this.submitting;\n        },\n        get numPages() : number {\n            return this.form ? this.form.content.pages.length : 0;\n        },\n        get hasNextPage() : boolean {\n            return this.currentPage < this.numPages -1;\n        },\n        get hasPrevPage() : boolean {\n            return this.currentPage > 0 && this.numPages > 1\n        },\n        get isSubmittable() : boolean {\n            return this.form ? this.form.isSubmittable : false;\n        },\n        nextPage : function () {\n            if(!this.form) {\n                return;\n            }\n            let currentPage = this.form.content.pages[this.currentPage] as Page;\n            let errors = currentPage.errors;\n            let {validationDisablesPaging} = this.form.formLayoutOptions;\n            // Highlight all errors\n            currentPage.fieldIds.forEach((id: string) => {\n                this.touched[id] = true;\n            });\n            if (!errors || errors.length == 0||validationDisablesPaging == false) {\n                this.currentPage = this.currentPage + 1;\n            }\n        },\n        prevPage : function() {\n            this.currentPage = this.currentPage - 1;\n        },\n        setForm : function (form: Form) {\n            this.form = form;\n\n        },\n        setFieldValue: function (id: string, value: any) {\n            this.values[id] = value;\n        },\n        setFieldTouched: function (id: string) {\n            this.touched[id] = true;\n        },\n        setFieldError: function (id: string, error: any) {\n            this.errors[id] = error;\n        }\n    }\n    return observable(store);\n}\n\nexport type FormStoreType = ReturnType<typeof createFormStore>;","import * as React from \"react\";\nimport {FormStoreType, createFormStore} from \"./FormStore\";\nimport { useLocalStore } from \"mobx-react\";\nimport { IFormProps } from '../models/form.properties';\nimport { Factory } from '../models/factory';\nexport const formStoreContext = React.createContext<FormStoreType | null>(null);\n\nexport interface FormStoreProviderProps {\n  initialState?: IFormProps;\n  formStore?: FormStoreType;\n}\n\nexport const FormStoreProvider: React.FC<FormStoreProviderProps> = (props) => {\n    let store;\n    if (props.formStore) {\n        store = props.formStore;\n    } else if (props.initialState) {\n        store = useLocalStore(createFormStore);\n        store.setForm(Factory.makeForm(store, props.initialState));\n    } else {\n      throw new Error(\"FormStoreProvider - Pass initialState or formStore\")\n    }\n    return (\n      <formStoreContext.Provider value={store}>\n        {props.children}\n      </formStoreContext.Provider>\n    )\n}","module.exports = moment;","module.exports = React;","module.exports = ReactDOM;"],"sourceRoot":""}