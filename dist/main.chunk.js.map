{"version":3,"sources":["webpack://Forms/./src/app.tsx","webpack://Forms/./src/config.ts","webpack://Forms/./src/models/column.ts","webpack://Forms/./src/models/common.ts","webpack://Forms/./src/models/condition.predicate.ts","webpack://Forms/./src/models/condition.ts","webpack://Forms/./src/models/factory.ts","webpack://Forms/./src/models/field.ts","webpack://Forms/./src/models/form.ts","webpack://Forms/./src/models/layout.ts","webpack://Forms/./src/models/page.ts","webpack://Forms/./src/models/section.ts","webpack://Forms/./src/models/validation.ts","webpack://Forms/./src/models/validator.ts","webpack://Forms/./src/store/FormStore.ts","webpack://Forms/./src/store/FormStoreProvider.tsx","webpack://Forms/external \"antd\"","webpack://Forms/external \"moment\"","webpack://Forms/external \"React\"","webpack://Forms/external \"ReactDOM\""],"names":["FormView","lazy","then","module","default","FormWrapper","props","localStore","isLoading","response","this","error","hasEnded","name","isRemoteError","isThrownError","useEffect","formId","_response","fetch","apiHost","json","redirect","window","location","console","fetchData","style","height","overflow","backgroundColor","active","status","title","message","Suspense","fallback","initialState","renderForm","selector","log","env","version","document","querySelector","debug","hostname","assetPath","Column","data","store","_type","initialize","fields","reduce","all","f","concat","validator","errors","every","i","isValid","id","uuid","length","field","index","splice","push","forEach","addField","index1","index2","atIndex","toIndex","map","asPlainObject","span","valueOrDefault","value","defaultValue","Predicate","operator","condition","PredicateConditions","indexOf","Error","PredicateOperators","Condition","predicates","p","ancestors","self","lhs","rhs","op","state","conditionsDisabled","currentValue","values","result","uuidv1","EmptyForm","description","formLayoutOptions","showPageTitles","showSteps","showSectionBorders","showPageBorders","showSectionTitles","validationDisablesPaging","layout","itemLayoutOptions","labelAlign","labelCol","offset","wrapperCol","content","subtitle","Factory","item","Math","random","toFixed","predicate","ensureIds","makePredicates","r","columns","c","makeFields","floor","column","sections","s","makeColumns","pages","page","makeSections","formData","form","makePages","_formData","Field","label","helpText","placeholder","fieldOptions","valuePropName","componentProps","type","inputType","Object","assign","validation","rule","storage","children","touched","setValue","setCondition","conditionState","validate","isValidateable","presence","setFieldValue","setFieldTouched","_dispose","change","setConditionState","newValue","clone","recurseEverything","detectCycles","JSON","stringify","Form","exid","labels","width","sidebar","scripts","styles","datasets","paginate","css","inline","external","header","rows","footer","trackingPixels","total","numFields","validTarget","stopSubmit","idFieldMap","uuidFieldMap","keys","submitTarget","errorRedirect","successRedirect","e","preventDefault","stopPropagation","setSubmitting","meta","payload","key","isSubmittable","a","post","catch","reason","submitError","setTimeout","href","dir","bound","AllScreenWidths","LayoutOption","filter","d","dimension","colspan","FormLayoutOptions","ItemLayoutOptions","Page","fieldNames","section","fieldIds","icon","Section","gutter","ValidationAllowedRules","ValidationRuleNames","ValidationRuleMap","ValidationRule","date","datetime","email","equality","exclusion","format","inclusion","numericality","url","settings","extend","validators","parse","options","utc","dateOnly","Validator","validationErrors","prefixedMessage","unPrefixedMessage","replace","attribute","toUpperCase","validationDisabled","isHidden","constraints","formatters","custom","formatError","bind","setFieldError","undefined","createFormStore","currentPage","isReady","submitting","numPages","isSubmitting","nextPage","prevPage","setForm","formStoreContext","FormStoreProvider","formStore","makeForm","Provider","exports","antd","moment","React","ReactDOM"],"mappings":"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","file":"main.chunk.js","sourcesContent":["import { Layout, Result, Skeleton } from \"antd\";\nimport React from 'react';\nimport { render } from 'react-dom';\nimport \"./forms.core.m.css\";\nimport { FormStoreProvider } from \"./store/FormStoreProvider\";\nimport config from \"./config\";\nimport { useLocalStore, useObserver } from 'mobx-react';\nimport { observable, reaction, toJS } from 'mobx';\n\nexport interface IFormRenderProps {\n    formId: string;\n    initialState? : any;\n}\n\nconst FormView = React.lazy(() => import(/* webpackChunkName: \"core\" */ \"./views/FormView\").then((module) => {return {default: module.FormView}}));\n\nconst FormWrapper : React.FC<IFormRenderProps> = (props: IFormRenderProps) => {\n\n    const localStore = useLocalStore(() => ({\n        isLoading: true as boolean,\n        response : null as any,\n        get status () : \"warning\"|\"error\"|\"success\" {\n            if (this.isLoading || !this.response || (this.response && !this.response.error)) {\n                return \"success\";\n            }\n            return this.response.error == \"InactiveForm\" ? \"warning\" : \"error\";\n        },\n        get message () : string {\n            if (!this.response || !this.response.error) {\n                return \"\";\n            }\n            if (this.response.error == \"InactiveForm\") {\n                return this.response.hasEnded ? `${this.response.name} is no longer accepting entries` : `${this.response.name} hasn't starting accepting entries`\n            }\n            return \"No content available at this location, please check the URL.\"\n        },\n        isRemoteError: false as boolean,\n        isThrownError: false as boolean\n    }));\n\n    React.useEffect(() => {\n        let fetchData = async function() {\n            try {\n                let _response: any = await fetch(`//${config.apiHost}/form/json/${props.formId}`);\n                let response = await _response.json();\n                localStore.response = response;\n                if (response.error) {\n                    if (response.error == \"InactiveForm\" && response.redirect) {\n                        window.location = response.redirect;\n                        return;\n                    }\n                    localStore.isRemoteError = true;\n                }\n            } catch (error) {\n                localStore.isThrownError = true;\n                console.error(error);\n            }\n            localStore.isLoading = false;\n        }\n\n        if(props.formId) {\n            fetchData();\n        }\n    }, []);\n\n    return useObserver(() => {\n        return <Layout style={{height: '100vh', overflow: 'hidden', backgroundColor: \"#ffff\"}}>\n        { localStore.isLoading ? <Skeleton active={true}/> : <>\n            {localStore.isRemoteError && <Result status={localStore.status} title={localStore.message}/>}\n            {localStore.isThrownError && <Result status=\"error\" title=\"There was an error fetching this content, please try again later\"/>}\n            {localStore.response && <React.Suspense fallback=\"Loading\">\n                <FormStoreProvider initialState={toJS(localStore.response)}>\n                    <FormView />\n                </FormStoreProvider>\n            </React.Suspense>}\n        </> }\n    </Layout>});\n}\n\nexport async function renderForm(selector:string, formId: string, initialState?: any) {\n    console.log(`lib-forms-core [${config.env}] [${config.version}]`);\n    if (initialState) {\n        render(\n            <Layout style={{height: '100vh', overflow: 'hidden'}}>\n                <React.Suspense fallback=\"Loading\">\n                    <FormStoreProvider initialState={initialState}>\n                        <FormView />\n                    </FormStoreProvider>\n                </React.Suspense>\n            </Layout>, document.querySelector(selector)\n        )\n    } else {\n        render (<FormWrapper formId={formId}/>, document.querySelector(selector))\n    }\n};","declare var __DEBUG__   : boolean;\ndeclare var __ENV__     : string;\ndeclare var __VERSION__ : string;\ndeclare var __HOSTNAME__: string;\ndeclare var __ASSET_PATH__: string;\ndeclare var __API_HOST__    : string;\n\nexport default {\n    env: __ENV__,\n    debug: __DEBUG__,\n    version: __VERSION__,\n    hostname: __HOSTNAME__,\n    assetPath: __ASSET_PATH__,\n    apiHost  : __API_HOST__\n}","import { action, computed, observable, toJS } from \"mobx\";\nimport { FormStoreType } from \"../store/FormStore\";\nimport { valueOrDefault } from \"./common\";\nimport { Field } from \"./field\";\nimport { IFieldProps } from \"./field.properties\";\nimport { IValidationError } from \"./validation\";\n\nexport interface IColumn {\n    id  :string;\n    uuid?:string;\n    _type?: string;\n    name?:string;\n    title?:string;\n    span?:number;\n    fields?: IFieldProps[];\n}\n\nexport class Column implements IColumn {\n    readonly _type : string = \"Column\";\n    @observable uuid: string;\n    @observable id: string;\n    @observable name: string;\n    @observable span: number;\n    @observable title: string;\n    @observable fields: Field[];\n    store: FormStoreType;\n\n    @computed get errors() : IValidationError[] {\n        return this.fields.reduce((all: any[], f: Field)=>{\n            return all.concat(f.validator.errors);\n        }, <any[]>[]);\n    }\n\n    @computed get isValid() : boolean {\n        return this.fields.every((f, i) => {\n            return f.isValid;\n        });\n    }\n\n    @computed get idFieldMap() : { [key:string]:Field; } {\n        return this.fields.reduce((all: {}, f: Field)=>{\n            all[f.id] = f;\n            return all;\n        }, {});\n    }\n\n    @computed get uuidFieldMap() : { [key:string]:Field; } {\n        return this.fields.reduce((all: {}, f: Field)=>{\n            all[f.uuid] = f;\n            return all;\n        }, {});\n    }\n\n    @computed get numFields() : number {\n        return this.fields.length;\n    }\n\n    @action addField(field: Field, index?: number) : void {\n        if (typeof index != 'undefined' && index != null && index > -1) {\n            this.fields.splice(index, 0, field);\n        } else {\n            this.fields.push(field);\n        }\n    }\n\n    @action addFields(...fields: Field[]) {\n        fields.forEach((f: Field) => this.addField(f));\n    }\n\n    @action removeField(index: number) {\n        this.fields.splice(index, 1)\n    }\n\n    @action swapFields(index1: number, index2: number): void {\n        let { fields } = this;\n        [fields[index1], fields[index2]] = [fields[index2], fields[index1]];\n    }\n\n    @action moveField(atIndex: number, toIndex: number) {\n        this.fields.splice(toIndex, 0, this.fields.splice(atIndex, 1)[0]);\n    }\n\n    constructor(data: IColumn, store) {\n        this.initialize(data, store);\n    }\n\n    @computed get asPlainObject() : IColumn {\n        let fields = this.fields ?  this.fields.map((f) => {\n            return f.asPlainObject\n        }) : [];\n        return {\n            ...toJS({id: this.id,uuid: this.uuid,span: this.span,name: this.name,title: this.title}),\n            fields: fields\n        };\n    }\n\n    @action initialize(data: IColumn, store: FormStoreType) {\n        this.uuid = data.uuid;\n        this.store = store;\n        this.id = data.id;\n        this.span = data.span;\n        this.name = valueOrDefault(data.name, `${this._type}-${data.id}`);\n        this.title = valueOrDefault(data.title, '');\n        this.fields = valueOrDefault(<Field[]>data.fields, <Field[]>[]);\n    }\n}","const uuidv1 = require('uuid/v1');\n\nexport function valueOrDefault<T>(value: T, defaultValue: T|null): T {\n    return (typeof(value) !== 'undefined' && value !== null ? value : defaultValue);\n}\n","import { action, observable } from \"mobx\";\nimport { FormStoreType } from \"../store/FormStore\";\n\nexport interface IPredicate {\n    uuid?: string;\n    field: string;\n    condition: any;\n    value?: any;\n    operator?: string;\n}\n\nexport class Predicate implements IPredicate {\n    static readonly PredicateConditions = [\"eq\",  \"neq\",  \"gt\",  \"lt\", \"gteq\", \"lteq\", \"hasval\", \"nothasval\"];\n    static readonly PredicateOperators = [\"or\", \"and\"];\n    uuid: string;\n    @observable field: string;\n    @observable condition: string;\n    @observable value: any;\n    @observable operator: string = \"or\";\n    store: FormStoreType;\n\n    @action initialize(data: IPredicate, store: FormStoreType) {\n        if (!data.condition || Predicate.PredicateConditions.indexOf(data.condition) == -1) {\n            throw new Error(`InvalidPredicateCondition - ${data.condition}`);\n        }\n        if(data.operator && Predicate.PredicateOperators.indexOf(data.operator) == -1) {\n            throw new Error(`InvalidPredicateOperator - ${data.operator}`);\n        }\n        this.uuid = data.uuid;\n        this.store = store;\n        this.field = data.field;\n        this.condition = data.condition;\n        this.value = data.value;\n        this.operator = data.operator;\n    }\n\n    constructor(data:IPredicate, store: FormStoreType) {\n        this.initialize(data, store);\n    }\n}","import { action, computed, observable, observe } from \"mobx\";\nimport { FormStoreType } from \"../store/FormStore\";\nimport { IPredicate, Predicate } from \"./condition.predicate\";\n\nexport interface ICondition {\n    predicates: IPredicate[],\n    ancestors?: string[],\n}\n\nexport class Condition {\n    @observable predicates: Predicate[];\n    @observable ancestors?: string[];\n    store: FormStoreType;\n\n    @action initialize(data: ICondition, store: FormStoreType) {\n        let predicates : Predicate[] = [];\n        data.predicates.forEach((p: IPredicate)=> {\n            predicates.push(new Predicate(p, store));\n        })\n        this.predicates = predicates;\n        this.ancestors = [];\n        this.store = store;\n        let self = this;\n\n        this.predicates.forEach((p) => {\n            self.ancestors.push(p.field);\n        });\n    }\n\n    constructor(data: ICondition, store: FormStoreType) {\n        this.initialize(data, store);\n    }\n\n    @action addPredicates(...p : IPredicate[]) {\n        p.forEach((p) => {\n            this.predicates.push(new Predicate(p, this.store));\n            this.ancestors.push(p.field);\n        });\n    }\n\n    reduce(lhs:any, rhs:any, op: string) : boolean {\n        if (op == 'and') {\n            return lhs && rhs;\n        } else {\n            return lhs || rhs;\n        }\n    }\n\n    @computed get value() : boolean {\n        var state: boolean;\n        let self = this;\n\n        if (self.store.conditionsDisabled || !this.predicates || this.predicates.length == 0){\n            return true;\n        }\n\n        this.predicates.forEach((p, i) => {\n            let currentValue = self.store.values[p.field];\n            var result: any = null;\n            switch(p.condition) {\n                case \"eq\":\n                    result = currentValue == p.value;\n                    break;\n                case \"neq\":\n                    result = currentValue != p.value;\n                    break;\n                case \"gt\":\n                    result = currentValue > p.value;\n                    break;\n                case \"lt\":\n                    result = currentValue < p.value;\n                    break;\n                case \"gteq\":\n                    result = currentValue >= p.value;\n                    break;\n                case \"lteq\":\n                    result = currentValue <= p.value;\n                    break;\n                case \"hasval\":\n                    result = typeof(currentValue) != 'undefined' && currentValue != null && currentValue !== \"\";\n                    break;\n                case \"nothasval\":\n                    result = typeof(currentValue) == 'undefined' || currentValue == null || currentValue == \"\";\n                    break;\n                default:\n                    result = false;\n            }\n            state = (i == 0) ? result : this.reduce(state, result, p.operator);\n        });\n        return state;\n    }\n}","import { FormStoreType } from \"../store/FormStore\";\nimport { Column, IColumn } from \"./column\";\nimport { Condition, ICondition } from \"./condition\";\nimport { IPredicate, Predicate } from \"./condition.predicate\";\nimport { Field } from \"./field\";\nimport { IFieldProps } from \"./field.properties\";\nimport { Form } from \"./form\";\nimport { IFormProps } from \"./form.properties\";\nimport { IPage, Page } from \"./page\";\nimport { ISection, Section } from \"./section\";\nconst uuidv1 = require('uuid/v1');\n\nexport const EmptyForm : IFormProps = {\n    id: null,\n    name: \"Untitled Form\",\n    description: \"Form description\",\n    formLayoutOptions : {\n        showPageTitles : true,\n        showSteps: true,\n        showSectionBorders: false,\n        showPageBorders: false,\n        showSectionTitles: false,\n        validationDisablesPaging: true\n    },\n    layout : \"vertical\",\n    itemLayoutOptions : {\n        labelAlign : \"left\",\n        labelCol : {\"xl\" : {offset:0, span: 8}},\n        wrapperCol : {\"xl\" : {offset:0, span: 16}}\n    },\n    content: {\n        title: \"Form title\",\n        subtitle: \"Form subtitle\"\n    }\n}\n\nexport class Factory {\n    static ensureIds<T>(item: T) {\n        if (!item['uuid']) {\n            item['uuid'] = uuidv1();\n        }\n\n        if(!item['id']) {\n            item['id'] = (1e6 * Math.random()).toFixed(0) + \"\";\n        }\n    }\n\n    static makePredicates(store: FormStoreType, ...predicates: IPredicate[]) : Predicate[] {\n        let response: Predicate[] = [];\n        predicates.forEach((predicate: IPredicate) => {\n            Factory.ensureIds(predicate);\n            response.push(new Predicate(predicate, store));\n        });\n        return response;\n\n    }\n\n    static makeCondition(store: FormStoreType, condition: ICondition) : Condition {\n        let predicates = Factory.makePredicates(store, ...condition.predicates);\n        return new Condition({predicates: predicates}, store);\n    }\n\n    static makeFields(store: FormStoreType, ...fields: IFieldProps[]) : Field[] {\n        if (!fields || fields.length == 0) {\n            return <Field[]>[];\n        }\n        return fields.reduce((r: Field[], f: IFieldProps) => {\n            Factory.ensureIds(f);\n            r.push(new Field({...f, condition: f.condition}, store));\n            return r;\n        }, <Field[]>[]);\n    }\n\n    static makeColumns(store: FormStoreType, ...columns: IColumn[]) : Column[] {\n        let response : Column[] = [];\n        if (!columns || columns.length == 0) {\n            return response;\n        }\n\n        columns.forEach((c: IColumn) => {\n            Factory.ensureIds(c);\n            let fields = c.fields && c.fields.length > 0 ? Factory.makeFields(store, ...c.fields) : <Field[]>[];\n            if (!c.span) {\n                c.span = Math.floor(24/columns.length);\n            }\n            let column = new Column({...c, fields: fields}, store);\n            response.push(column);\n        })\n        return response;\n    }\n\n    static makeSections(store: FormStoreType, ...sections: ISection[]) : Section[] {\n        let response: Section[] = [];\n        if (!sections || sections.length == 0) {\n            return <Section[]>[];\n        }\n        sections.forEach((s: ISection) => {\n            Factory.ensureIds(s);\n            let columns = s.columns && s.columns.length > 0 ? Factory.makeColumns(store, ...s.columns) : <Column[]>[];\n            response.push(new Section({...s, columns: columns}, store));\n        });\n        return response;\n    }\n\n    static makePages(store: FormStoreType, ...pages: IPage[]) : Page[] {\n        if (!pages || pages.length == 0) {\n            return <Page[]>[];\n        }\n        let response: Page[] = [];\n        pages.forEach((page: IPage) => {\n            Factory.ensureIds(page);\n            let sections = page.sections && page.sections.length > 0 ? Factory.makeSections(store, ...page.sections) : <Section[]>[];\n            response.push(new Page({...page, sections: sections}, store));\n        });\n        return response;\n    }\n\n    static makeForm(store: FormStoreType, formData: IFormProps) : Form {\n        let form: Form;\n        if (formData && formData.content && formData.content.pages) {\n            formData.content.pages = Factory.makePages(store, ...formData.content.pages)\n            form = new Form(formData, store);\n        } else {\n            let _formData = formData ? formData : {id: null, content: {pages: []}}\n            form = new Form(_formData, store);\n        }\n        return form;\n    }\n}","import { action, computed, observable, observe, toJS, autorun } from \"mobx\";\nimport { FormStoreType } from \"../store/FormStore\";\nimport { Condition, ICondition } from \"./condition\";\nimport { IFieldOptions } from \"./field.options\";\nimport { IComponentProps, IFieldProps, IFieldRuntimeProps, IFieldStorage } from \"./field.properties\";\nimport { ItemLayoutOptions } from './layout';\nimport { IValidationRule, ValidationRule } from \"./validation\";\nimport { Validator } from \"./validator\";\nimport { observer } from 'mobx-react-lite';\n\n\nexport class Field implements IFieldProps, IFieldRuntimeProps {\n    readonly _type : string = \"Field\";\n    uuid: string;\n    @observable id: string;\n    @observable name: string;\n\n    @observable type: string;\n    @observable label: string;\n    @observable value : any;\n    @observable touched: boolean;\n    @observable inputType: string;\n    @observable helpText: string;\n    @observable placeholder: string;\n    fieldOptions: IFieldOptions;\n    children: any;\n    @observable condition: Condition;\n    @observable storage: IFieldStorage;\n    store: FormStoreType;\n    @observable location: any;\n    @observable conditionState: boolean;\n    @observable validator : Validator;\n    validation: IValidationRule;\n    @observable componentProps: IComponentProps;\n    @observable itemLayoutOptions : ItemLayoutOptions;\n    _dispose : any;\n\n    @action mergeUpdate(data: Partial<IFieldProps>) {\n        this.id = data.id ? data.id : this.id;\n        this.name = data.name;\n        this.label = data.label;\n        this.helpText = data.helpText;\n        this.placeholder = data.placeholder;\n        let {fieldOptions} = data;\n        this.fieldOptions = {...this.fieldOptions, ...{valuePropName: fieldOptions ? fieldOptions.valuePropName : this.fieldOptions.valuePropName}};\n        this.componentProps = <IComponentProps>{...this.componentProps, ...data.componentProps};\n        return;\n    }\n\n    @action initialize(data: IFieldProps, store: FormStoreType) {\n        this.store = store;\n        this.id = data.id;\n        this.uuid = data.uuid;\n        this.name = data.name || `${this._type}_${data.id}`;\n        this.type = data.type;\n        this.label = data.label;\n        this.inputType = data.inputType;\n        this.fieldOptions = data.fieldOptions ? Object.assign({id: data.id}, {...data.fieldOptions}) : {id: data.id};\n        this.fieldOptions.valuePropName = (data.fieldOptions||{}).valuePropName || this.name;\n        this.validation = data.validation;\n        this.validator = new Validator({rule: new ValidationRule(data.validation), field: this, store: store});\n        this.storage = data.storage;\n        this.label = data.label;\n        this.helpText = data.helpText;\n        this.placeholder = data.placeholder;\n        this.children = data.children || {};\n        this.componentProps = data.componentProps || {};\n        this.location = data.location || {};\n        this.touched = false;\n        this.itemLayoutOptions = new ItemLayoutOptions(data.itemLayoutOptions);\n\n        if (this.componentProps && this.componentProps['defaultValue']) {\n            this.setValue(this.componentProps['defaultValue']);\n        } else if (this.componentProps && this.componentProps['defaultChecked']) {\n            this.setValue(this.componentProps['defaultChecked']);\n        }\n\n        if (!this.fieldOptions.valuePropName) {\n            this.fieldOptions.valuePropName = `${this.id}_value`;\n        }\n\n        if(this.inputType == 'daterange') {\n            this.componentProps[\"startValuePropsName\"] = !!this.componentProps[\"startValuePropsName\"] ? this.componentProps[\"startValuePropsName\"] : `start_date`;\n            this.componentProps[\"endValuePropsName\"] = !!this.componentProps[\"endValuePropsName\"] ? this.componentProps[\"endValuePropsName\"] : `end_date`;\n        }\n\n        if (data.condition) {\n            this.setCondition(data.condition);\n        } else {\n            this.condition = null;\n            this.conditionState = true;\n        }\n        this.validate();\n        return;\n    }\n\n    @computed get className() : string {\n        return `.fl-field .fl-${this.inputType}${this.type?'-'+this.type:''}`;\n    }\n\n    @computed get isTouched() : boolean {\n        return this.store.touched[this.id];\n    }\n\n    @computed get isValidateable() {\n        return this.validator.isValidateable;\n    }\n\n    @computed get isValid() : boolean {\n        return this.validator.isValid;\n    }\n\n    @computed get isHidden() : boolean {\n        return this.inputType == \"hidden\";\n    }\n\n    @computed get isRequired() : boolean {\n        return !!this.validator.rule.presence;\n    }\n\n    @computed get currentValue() {\n        return this.value\n    }\n\n    @computed get isDisabled() : boolean {\n        return !this.conditionState;\n    }\n\n    @action setValue(value: any) {\n        this.value = value;\n        this.store.setFieldValue(this.id, value);\n        this.validate();\n    }\n\n    @action setTouched() {\n        this.touched = true;\n        this.store.setFieldTouched(this.id);\n        this.validate();\n    }\n\n    @action setConditionState(value: boolean) {\n        this.conditionState = value;\n        this.validate();\n    }\n\n    @action setCondition(condition: ICondition) {\n        if(condition == null || !condition.predicates || condition.predicates.length == 0) {\n            this.condition = null;\n            this.conditionState = true;\n            if(this._dispose) {\n                this._dispose();\n            }\n            this.validate();\n            return;\n        }\n\n        this.condition = new Condition(condition, this.store);\n        this.conditionState = this.condition.value;\n\n        this._dispose = observe(this.condition, \"value\", (change) => {\n            this.setConditionState(change.newValue)\n            if(change.newValue == true) {\n                this.validate();\n            }\n        }, true);\n    }\n\n    @action validate() {\n\n       this.validator.validate();\n    }\n\n    @computed get asPlainObject() : IFieldProps {\n        let clone = {...this};\n        delete clone.store;\n        delete clone.validator;\n        clone.value = null;\n        clone.conditionState = false;\n        return toJS(clone, {recurseEverything: true, detectCycles: true});\n    }\n\n    @computed get serialize(): string  {\n        let clone = this.asPlainObject;\n        return JSON.stringify(clone);\n    }\n\n    constructor(data: IFieldProps, store: FormStoreType) {\n        this.initialize(data, store);\n    }\n}","import axios from \"axios\";\nimport { action, computed, observable, toJS } from \"mobx\";\nimport { FormEvent } from \"react\";\nimport { FormStoreType } from \"../store/FormStore\";\nimport { valueOrDefault } from \"./common\";\nimport { Field } from \"./field\";\nimport { IFormContent, IFormProps, IFormStatus, IFormTenant } from \"./form.properties\";\nimport { FormLayoutOptions, ItemLayoutOptions } from './layout';\nimport {Page} from \"./page\";\nimport { IValidationError } from \"./validation\";\n\n\nexport class Form implements IFormProps {\n    store: FormStoreType\n    uuid: string;\n\n    @observable id: string;\n    @observable exid: string;\n    @observable description: string;\n    @observable name: string;\n    @observable tenant: IFormTenant;\n    @observable status: IFormStatus;\n    @observable content: IFormContent;\n    @observable layout: any;\n    @observable stopSubmit: boolean;\n    @observable submitTarget: string;\n    @observable submitError: string;\n    @observable formLayoutOptions: FormLayoutOptions;\n    @observable itemLayoutOptions: ItemLayoutOptions;\n    @observable successRedirect: string;\n    @observable errorRedirect: string;\n\n    @action initialize(data: IFormProps, store: FormStoreType) {\n        this.store = store;\n        this.id = data.id;\n        this.name = data.name;\n        this.uuid = data.uuid;\n        this.exid = valueOrDefault(data.exid, null);\n        this.description = valueOrDefault(data.description, null);\n\n        if (data.content) {\n            this.content = {\n                title: valueOrDefault(data.content.title, null),\n                subtitle: valueOrDefault(data.content.subtitle, null),\n                labels: valueOrDefault(data.content.labels, null),\n                offset: valueOrDefault(data.content.offset, null),\n                width: valueOrDefault(data.content.width, null),\n                sidebar: valueOrDefault(data.content.sidebar, null),\n                scripts: valueOrDefault(data.content.scripts, null),\n                styles: valueOrDefault(data.content.styles, null),\n                datasets: valueOrDefault(data.content.datasets, null),\n                pages: valueOrDefault(<Page[]>data.content.pages, []),\n                paginate: valueOrDefault(data.content.paginate, false)\n            }\n            if (data.content.css) {\n                this.content.css = {\n                    inline : valueOrDefault(data.content.css.inline, []),\n                    external: valueOrDefault(data.content.css.external, [])\n                }\n            } else {\n                this.content.css = {inline: null, external: null}\n            }\n            if (data.content.header) {\n                this.content.header = {\n                    rows: valueOrDefault(data.content.header.rows, [])\n                }\n            } else {\n                this.content.header = {rows: []}\n            }\n\n            if (data.content.footer) {\n                this.content.footer = {\n                    rows: valueOrDefault(data.content.footer.rows, [])\n                }\n            } else {\n                this.content.footer = {rows: []}\n            }\n\n            if (data.content.trackingPixels) {\n                this.content.trackingPixels = data.content.trackingPixels;\n            } else {\n                this.content.trackingPixels = []\n            }\n        } else {\n            this.content = {\n                title: null,\n                subtitle: null,\n                labels: null,\n                offset: null,\n                width: null,\n                sidebar: null,\n                scripts: [],\n                styles: [],\n                datasets: [],\n                pages: [],\n                paginate: true\n            }\n            this.content.css = {inline: null, external: null}\n            this.content.header = {rows: []}\n            this.content.footer = {rows: []}\n            this.content.trackingPixels = [];\n        }\n\n        this.layout = valueOrDefault(data.layout, \"vertical\");\n        this.formLayoutOptions = new FormLayoutOptions(data.formLayoutOptions);\n        this.itemLayoutOptions = new ItemLayoutOptions(data.itemLayoutOptions);\n    }\n\n    constructor(data: IFormProps, store: FormStoreType) {\n        this.initialize(data, store);\n    }\n\n    @computed get isValid() : boolean {\n        return this.content.pages.every((p: Page) => {\n            return p.isValid;\n        })\n    }\n\n    @computed get numPages() : number {\n        return this.content.pages.length;\n    }\n\n    @computed get numFields() : number {\n        return this.content.pages.reduce((total: number, p: Page) => {\n            return total + p.numFields;\n        }, 0);\n    }\n\n    @action addPage(p : Page, index?: number) {\n        if (typeof index != 'undefined' && index != null && index > -1) {\n            this.content.pages.splice(index, 0, p);\n        } else {\n            this.content.pages.push(p)\n        }\n    }\n\n    @action removePage(index: number) : void {\n        this.content.pages.splice(index, 1);\n    }\n\n    @action swapPages(index1: number, index2: number): void {\n        let { pages } = this.content;\n        [pages[index1], pages[index2]] = [pages[index2], pages[index1]];\n    }\n\n    @action movePage(atIndex: number, toIndex: number) : void {\n        this.content.pages.splice(toIndex, 0, this.content.pages.splice(atIndex, 1)[0]);\n    }\n\n    @computed get isSubmittable() : boolean {\n        let validTarget =  !!this.stopSubmit ?  !this.stopSubmit : true\n        return this.errors.length == 0 && validTarget;\n    }\n\n    @computed get idFieldMap() : { [key:string]:Field; }  {\n        return this.content.pages.reduce((all: {}, s: Page)=>{\n            return {...all, ...s.idFieldMap}\n        }, {});\n    }\n\n    @computed get uuidFieldMap() : { [key:string]:Field; }  {\n        return this.content.pages.reduce((all: {}, s: Page)=>{\n            return {...all, ...s.uuidFieldMap}\n        }, {});\n    }\n\n    @computed get errors() : IValidationError[] {\n        return this.content.pages.reduce((all: any[], p: Page)=>{\n            return all.concat(p.errors);\n        }, <any[]>[]);\n    }\n\n    @computed get values() : { [key:string]: any; } {\n        return Object.keys(this.idFieldMap).reduce((all: {}, id: string) => {\n            let f: Field = this.idFieldMap[id];\n            // HTMLFragment and TextBlock have no value\n            if (f.inputType ==  'htmlfragment' || f.inputType == 'textblock') {\n                return all;\n            }\n            return {...all, [f.id]: f.value}\n        }, {});\n    }\n\n    @computed get asPlainObject() {\n        let clone : IFormProps = toJS({\n            id: this.id,\n            name: this.name,\n            uuid: this.uuid,\n            exid: this.exid,\n            description: this.description,\n            layout : this.layout,\n            formLayoutOptions : this.formLayoutOptions,\n            itemLayoutOptions : this.itemLayoutOptions,\n            submitTarget : this.submitTarget,\n            errorRedirect : this.errorRedirect,\n            successRedirect : this.successRedirect\n        }, {detectCycles : true, recurseEverything: true})\n\n        if (this.content) {\n            clone.content = {\n                ...toJS({\n                    title : this.content.title,\n                    subtitle : this.content.subtitle,\n                    labels : this.content.labels,\n                    offset : this.content.offset,\n                    width : this.content.width,\n                    sidebar : this.content.sidebar,\n                    scripts : this.content.scripts,\n                    styles : this.content.styles,\n                    datasets : this.content.datasets,\n                    paginate : this.content.paginate\n                }, {detectCycles : true, recurseEverything: true}),\n                pages : this.content.pages ? (this.content.pages as Page[]).map((p) => {return p.asPlainObject}) : []\n            }\n        }\n\n        return clone;\n    }\n\n    @action.bound handleSubmit(e: FormEvent) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.store.setSubmitting(true);\n        let meta = this.idFieldMap;\n        let payload = {};\n        let values = this.values;\n        Object.keys(values).forEach((id: string) => {\n            let key = meta[id].fieldOptions.valuePropName || meta[id].name;\n            payload[key] = values[id];\n        });\n\n        if(this.isSubmittable && !!this.submitTarget) {\n            axios.post(this.submitTarget, payload).catch((reason:any) => {\n                console.log('Submit Error', reason);\n                this.submitError = \"There was an error submitting this form\";\n                if (this.successRedirect) {\n                    setTimeout(()=> {\n                        window.location.href = this.successRedirect;\n                    }, 5000);\n                }\n            }).then(() => {\n                this.store.setSubmitting(false);\n                if (this.successRedirect) {\n                    setTimeout(()=> {\n                        window.location.href = this.errorRedirect;\n                    }, 5000);\n                }\n            })\n        } else {\n            console.dir(values);\n        }\n    }\n}","import { observable, action, computed } from \"mobx\";\nimport {valueOrDefault} from \"./common\";\n\nexport type ScreenWidth = \"xs\"|\"sm\"|\"md\"|\"lg\"|\"xl\";\nexport const AllScreenWidths: ScreenWidth[] = [\"xs\",\"sm\",\"md\",\"lg\",\"xl\"];\n\nexport interface ColSpanOffset {\n    span: number;\n    offset?: number;\n}\n\nexport interface ILayoutOption {\n    xs?  : ColSpanOffset;\n    sm?  : ColSpanOffset;\n    md?  : ColSpanOffset;\n    lg?  : ColSpanOffset;\n    xl?  : ColSpanOffset;\n}\nexport class LayoutOption implements ILayoutOption {\n    @observable xs  : ColSpanOffset;\n    @observable sm  : ColSpanOffset;\n    @observable md  : ColSpanOffset;\n    @observable lg  : ColSpanOffset;\n    @observable xl  : ColSpanOffset;\n\n    constructor(props: {[key in ScreenWidth]?: ColSpanOffset}={}) {\n        Object.keys(props).map((width: ScreenWidth) => {\n            if(AllScreenWidths.indexOf(width) > -1 && props[width]){\n                this[width] = props[width];\n            }\n        })\n    }\n\n    @computed get unused() : ScreenWidth[] {\n        return AllScreenWidths.filter((d) => {\n            return typeof this[d] == 'undefined' || this[d] == null\n        })\n    }\n\n    @computed get used() : ScreenWidth[] {\n        return AllScreenWidths.filter((d) => {\n            return typeof this[d] != 'undefined' && this[d] != null\n        })\n    }\n\n    add(dimension: ScreenWidth, colspan: ColSpanOffset) {\n        this[dimension] = colspan;\n    }\n\n}\n\nexport interface IFormLayoutOptions {\n    showSteps?: boolean,\n    showPageTitles?: boolean,\n    showSectionTitles?: boolean,\n    showSectionBorders? : boolean,\n    showPageBorders?: boolean,\n    validationDisablesPaging?: boolean;\n    labelAlign?: \"left\" | \"right\";\n    wrapperCol?: ColSpanOffset;\n    labelCol?: ColSpanOffset;\n}\n\nexport class FormLayoutOptions implements IFormLayoutOptions {\n    @observable showSteps: boolean;\n    @observable showPageTitles: boolean\n    @observable showSectionTitles: boolean\n    @observable showSectionBorders : boolean\n    @observable showPageBorders: boolean\n    @observable validationDisablesPaging: boolean\n    @observable labelAlign: \"left\" | \"right\"\n    @observable wrapperCol: ColSpanOffset\n    @observable labelCol: ColSpanOffset\n\n    constructor(props: IFormLayoutOptions) {\n        this.initialize(props);\n    }\n\n    @action initialize(props: IFormLayoutOptions) {\n        if(!props) {\n            return;\n        }\n        this.showSteps = valueOrDefault(props.showSteps, true);\n        this.showPageTitles = valueOrDefault(props.showPageTitles, true);\n        this.showSectionTitles = valueOrDefault(props.showSectionTitles, false);\n        this.showSectionBorders = valueOrDefault(props.showSectionBorders, false);\n        this.showPageBorders = valueOrDefault(props.showPageBorders, false);\n        this.validationDisablesPaging = valueOrDefault(props.validationDisablesPaging, true);\n        this.labelAlign = valueOrDefault(props.labelAlign, \"left\");\n        this.wrapperCol = valueOrDefault(props.wrapperCol, {span: 8});\n        this.labelCol = valueOrDefault(props.labelCol, {span: 6});\n    }\n}\n\nexport interface IItemLayoutOptions {\n    labelAlign? : \"left\"|\"right\";\n    labelCol?: ILayoutOption;\n    wrapperCol?: ILayoutOption;\n}\n\nexport class ItemLayoutOptions implements IItemLayoutOptions {\n    @observable labelAlign : \"left\"|\"right\";\n    @observable labelCol: LayoutOption;\n    @observable wrapperCol: LayoutOption;\n\n    @action initialize(props: IItemLayoutOptions) {\n        if(!props) {\n            return;\n        }\n        this.labelAlign = valueOrDefault(props.labelAlign, \"left\");\n        this.wrapperCol = new LayoutOption(props.wrapperCol);\n        this.labelCol = new LayoutOption(props.labelCol);\n    }\n\n    constructor(props: IItemLayoutOptions) {\n        this.initialize(props);\n    }\n}\n\n// export type ColumnLayout = { [key in ScreenWidth]?: ColSpanOffset };","import { action, computed, observable, toJS } from \"mobx\";\nimport { FormStoreType } from \"../store/FormStore\";\nimport { Column } from \"./column\";\nimport { valueOrDefault } from \"./common\";\nimport { Field } from \"./field\";\nimport { ISection, Section } from \"./section\";\nimport { IValidationError } from \"./validation\";\n\nexport interface IPage {\n    id: string;\n    uuid?:string;\n    name: string;\n    icon?: string;\n    sections: ISection[];\n    title?: string;\n    subtitle?: string;\n}\n\nexport class Page implements IPage {\n    readonly _type : string = \"Page\";\n    @observable id: string;\n    @observable uuid: string;\n    @observable name: string;\n    @observable icon: string;\n    @observable sections: Section[];\n    @observable title: string;\n    @observable subtitle: string;\n    store: FormStoreType;\n\n    @computed get fieldNames() : string[] {\n        let fieldNames: string[] = [];\n        if (!this.sections || this.sections.length == 0) {\n            return fieldNames;\n        }\n        this.sections.forEach((section: Section)=>{\n            if (section.columns && section.columns.length > 0) {\n                section.columns.forEach((column: Column) => {\n                    if (column.fields) {\n                        column.fields.forEach((field: Field)=> {\n                            fieldNames.push(field.name);\n                        });\n                    }\n                })\n            }\n        });\n        return fieldNames;\n    }\n\n\n    @computed get fieldIds() : string[] {\n        let fieldIds: string[] = [];\n        if (!this.sections || this.sections.length == 0) {\n            return fieldIds;\n        }\n        this.sections.forEach((section: Section)=>{\n            if (section.columns && section.columns.length > 0) {\n                section.columns.forEach((column: Column) => {\n                    if (column.fields) {\n                        column.fields.forEach((field: Field)=> {\n                            fieldIds.push(field.id);\n                        });\n                    }\n                })\n            }\n        });\n        return fieldIds;\n    }\n\n    @computed get idFieldMap() : { [key:string]:Field; }  {\n        return this.sections.reduce((all: {}, s: Section)=>{\n            return {...all, ...s.idFieldMap}\n        }, {});\n    }\n\n    @computed get uuidFieldMap() : { [key:string]:Field; }  {\n        return this.sections.reduce((all: {}, s: Section)=>{\n            return {...all, ...s.uuidFieldMap}\n        }, {});\n    }\n\n    @computed get errors() : IValidationError[] {\n        return this.sections.reduce((all: any[], s: Section)=>{\n            return all.concat(s.errors);\n        }, <any[]>[]);\n    }\n\n    @computed get isValid() : boolean {\n        return this.sections.every((s) => {\n            return s.isValid;\n        });\n    }\n\n    @computed get numSections() : number {\n        return this.sections.length;\n    }\n\n    @computed get numFields() : number {\n        return this.sections.reduce((total: number, s : Section) => {\n            return total + s.numFields;\n        }, 0);\n    }\n\n    @action addSection(section: Section, index?: number) : void {\n        if (typeof index != 'undefined' && index != null && index > -1) {\n            this.sections.splice(index, 0, section);\n        } else {\n            this.sections.push(section);\n        }\n    }\n\n    @action removeSection(index: number) {\n        this.sections.splice(index, 1)\n    }\n\n    @action swapSections(index1: number, index2: number): void {\n        let { sections } = this;\n        [sections[index1], sections[index2]] = [sections[index2], sections[index1]];\n    }\n\n    @action moveSection(atIndex: number, toIndex: number) {\n        this.sections.splice(toIndex, 0, this.sections.splice(atIndex, 1)[0]);\n    }\n\n    @computed get asPlainObject() : IPage {\n        let sections = this.sections ? this.sections.map((s) => {return s.asPlainObject}) : [];\n\n        return {\n            ...toJS({id : this.id,\n                uuid : this.uuid,\n                name : this.name,\n                title : this.title,\n                subtitle : this.subtitle,\n                icon : this.icon\n            }),\n            sections: sections\n        }\n    }\n\n    @action private initialize(data: IPage, store: FormStoreType) {\n        this.id = data.id;\n        this.store = store;\n        this.uuid = data.uuid;\n        this.name = valueOrDefault(data.name, `${this._type}-${data.id}`);\n        this.icon = valueOrDefault(data.name, \"\");\n        this.sections = valueOrDefault(<Section[]>data.sections, <Section[]>[]);\n        this.title = valueOrDefault(data.title, \"\");\n        this.subtitle = valueOrDefault(data.subtitle, \"\");\n    }\n\n    constructor (data: IPage, store: FormStoreType) {\n        this.initialize(data, store);\n    }\n}","import { action, computed, observable, toJS } from \"mobx\";\nimport { FormStoreType } from \"../store/FormStore\";\nimport { Column, IColumn } from \"./column\";\nimport { valueOrDefault } from \"./common\";\nimport { Field } from \"./field\";\nimport { IValidationError } from \"./validation\";\n\nexport interface ISection {\n    id: string;\n    uuid?:string;\n    name: string;\n    title?: string;\n    gutter?:number;\n    columns: IColumn[];\n}\n\nexport class Section implements ISection {\n    readonly _type : string = \"Section\";\n    @observable id: string;\n    @observable uuid:string;\n    @observable name: string;\n    @observable title: string;\n    @observable gutter: number;\n    @observable columns: Column[];\n    store: FormStoreType;\n\n    @computed get errors() : IValidationError[] {\n        return this.columns.reduce((all: any[], c: Column) => {\n            return all.concat(c.errors);\n        }, <any[]>[]);\n    }\n\n    @computed get numFields() : number {\n        return this.columns.reduce((total: number, column: Column) => {\n            total = total + column.numFields;\n            return total;\n        }, 0);\n    }\n\n    @action addColumn(column: Column, index?: number) : void {\n        if(!column.span) {\n            column.span = 6;\n        }\n        if (typeof index != 'undefined' && index != null && index > -1) {\n            this.columns.splice(index, 0, column);\n        } else {\n            this.columns.push(column);\n        }\n    }\n\n    @action removeColumn(index: number) {\n        this.columns.splice(index, 1)\n    }\n\n    @action swapColumns(index1: number, index2: number): void {\n        let { columns } = this;\n        [columns[index1], columns[index2]] = [columns[index2], columns[index1]];\n    }\n\n    @action moveColumn(atIndex: number, toIndex: number) {\n        this.columns.splice(toIndex, 0, this.columns.splice(atIndex, 1)[0]);\n    }\n\n    @computed get numColumns() : number {\n        return this.columns.length;\n    }\n\n    @computed get isValid() : boolean {\n        return this.columns.every((c) => {\n            return c.isValid;\n        });\n    }\n\n    @computed get idFieldMap() : { [key:string]: Field; } {\n        return this.columns.reduce((all: {}, c: Column)=>{\n            return {...all, ...c.idFieldMap}\n        }, {});\n    }\n\n    @computed get uuidFieldMap() : { [key:string]: Field; } {\n        return this.columns.reduce((all: {}, c: Column)=>{\n            return {...all, ...c.uuidFieldMap}\n        }, {});\n    }\n\n    @computed get asPlainObject() : ISection {\n        let columns = this.columns ? this.columns.map((c) => {\n            return c.asPlainObject\n        }) : [];\n        return {\n            ...toJS({id: this.\n                id,uuid:\n                this.uuid,\n                name: this.name,\n                title: this.title,\n                gutter: this.gutter\n            })\n            , columns: columns\n        };\n    }\n\n    @action initialize(data: ISection, store: FormStoreType) {\n        this.id = data.id;\n        this.uuid = data.uuid;\n        this.name = valueOrDefault(data.name, `${this._type}-${data.id}`);\n        this.title = valueOrDefault(data.title, '');\n        this.gutter = valueOrDefault(data.gutter, 16);\n        this.columns = valueOrDefault(<Column[]>data.columns, <Column[]>[]);\n        this.store = store;\n    }\n\n    constructor(data: ISection, store: FormStoreType) {\n        this.initialize(data, store);\n    }\n}","import { action, computed, observable, toJS } from \"mobx\";\nimport { DateConstraint, DateTimeConstraint, EmailConstraint, EqualityConstraint, ExclusionConstraint, FormatConstraint, GenericConstraint, InclusionConstraint, LengthConstraint, NumericalityConstraint, PresenceConstraint, URLConstraint } from \"./validation.constraints\";\n\n\nexport interface IValidationRule {\n    date? : DateConstraint,\n    datetime? : DateTimeConstraint,\n    email?: EmailConstraint,\n    equality?: EqualityConstraint,\n    exclusion?: ExclusionConstraint,\n    format?: FormatConstraint,\n    inclusion?: InclusionConstraint,\n    length?: LengthConstraint,\n    numericality?: NumericalityConstraint,\n    presence?: PresenceConstraint,\n    url?: URLConstraint\n}\n\nexport const ValidationAllowedRules = {\n    \"input\"       : [\"email\", \"equality\", \"format\", \"inclusion\", \"length\", \"presence\", \"url\"],\n    \"checkbox\"    : [\"presence\"],\n    \"number\"      : [\"presence\", \"equality\", \"format\"],\n    \"select\"      : [\"presence\"],\n    \"cascader\"    : [\"presence\"],\n    \"radiogroup\"  : [\"presence\"],\n    \"checkboxgroup\": [\"presence\"],\n    \"textarea\"    : [\"email\", \"equality\", \"format\", \"inclusion\", \"length\", \"presence\", \"url\"],\n    \"daterange\"   : [\"presence\", \"date\", \"datetime\"],\n    \"datepicker\"  : [\"presence\", \"date\", \"datetime\"],\n    \"monthpicker\" : [\"presence\", \"date\", \"datetime\"],\n    \"timepicker\"  : [\"presence\", \"date\", \"datetime\"],\n    \"yearpicker\"  : [\"presence\", \"date\", \"datetime\"],\n    \"starrating\"  : [\"presence\"],\n    \"switch\"      : [\"presence\"],\n    \"transfer\"    : [\"presence\"],\n    \"slider\"      : [\"presence\"],\n    \"textblock\"   : [],\n    \"hidden\"      : [],\n    \"htmlfragment\": [],\n}\n\nexport const ValidationRuleNames = [\n    {key: \"date\", label: \"Date\", value: \"date\"},\n    {key: \"datetime\", label: \"Datetime\", value: \"datetime\"},\n    {key: \"email\", label: \"Email\", value: \"email\"},\n    {key: \"equality\", label: \"Equals\", value: \"equality\"},\n    {key: \"exclusion\", label: \"Excludes\", value: \"exclusion\"},\n    {key: \"format\", label: \"Matches\", value: \"format\"},\n    {key: \"inclusion\", label: \"Includes\", value: \"inclusion\"},\n    {key: \"length\", label: \"Length\", value: \"length\"},\n    {key: \"numericality\", label: \"Numeric\", value: \"numericality\"},\n    {key: \"presence\", label: \"Present\", value: \"presence\"},\n    {key: \"url\", label: \"URL\", value: \"url\"}\n];\n\nexport const ValidationRuleMap = {\n    \"date\": \"Date\",\n    \"datetime\": \"Datetime\",\n    \"email\": \"Email\",\n    \"equality\": \"Equals\",\n    \"exclusion\": \"Excludes\",\n    \"format\": \"Matches\",\n    \"inclusion\": \"Includes\",\n    \"length\": \"Length\",\n    \"numericality\": \"Numeric\",\n    \"presence\": \"Present\",\n    \"url\": \"URL\"\n};\n\nexport interface IValidationError {\n    id: string,\n    name: string,\n    message: string,\n    prefixedMessage: string,\n    validator: string\n}\n\nexport class ValidationRule implements IValidationRule {\n    @observable date : DateConstraint\n    @observable datetime : DateTimeConstraint\n    @observable email: EmailConstraint\n    @observable equality: EqualityConstraint\n    @observable exclusion: ExclusionConstraint\n    @observable format: FormatConstraint\n    @observable inclusion: InclusionConstraint\n    @observable length: LengthConstraint\n    @observable numericality: NumericalityConstraint\n    @observable presence: PresenceConstraint\n    @observable url: URLConstraint\n\n    constructor(rule: IValidationRule) {\n        this.initialize(rule);\n    }\n\n    @action initialize(rule: IValidationRule = {}) {\n        this.date = rule.date;\n        this.datetime = rule.datetime;\n        this.email = rule.email;\n        this.equality = rule.equality;\n        this.exclusion = rule.exclusion;\n        this.format = rule.format;\n        this.inclusion = rule.inclusion;\n        this.length = rule.length;\n        this.numericality = rule.numericality;\n        this.presence = rule.presence;\n        this.url = rule.url;\n    }\n\n    @computed get constraints() : IValidationRule {\n        let c = {};\n        Object.keys(ValidationRuleMap).forEach((rule: string) => {\n            if (this[rule]) {\n                c[rule] = toJS(this[rule]);\n            }\n        })\n        return c;\n    }\n    @action addConstraint(key: string, settings: GenericConstraint) {\n        this[key] = settings;\n    }\n\n    @action updateConstraint(key: string, settings: GenericConstraint) {\n        this[key] = settings;\n    }\n\n    @action removeConstraint(key: string) {\n        this[key] = null;\n    }\n}","import {action, decorate, observable, computed, toJS} from \"mobx\";\nimport { FormStoreType } from \"../store/FormStore\";\nimport moment from 'moment'\nimport {Field} from \"./field\";\nimport {ValidationRule, IValidationError, IValidationRule} from \"./validation\";\n\nvar validate = require(\"validate.js\");\n\nvalidate.extend(validate.validators.datetime, {\n    // The value is guaranteed not to be null or undefined but otherwise it\n    // could be anything.\n    parse: function(value, options) : number {\n      return +moment.utc(value);\n    },\n    // Input is a unix timestamp\n    format: function(value: moment.MomentInput, options: any = {}) : string {\n      var format = options.dateOnly ? \"YYYY-MM-DD\" : \"YYYY-MM-DD hh:mm:ss\";\n      return moment.utc(value).format(format);\n    }\n});\n\nexport interface IValidationProps {\n    store: FormStoreType,\n    field: Field,\n    rule: IValidationRule\n}\n\nexport class Validator {\n    store: FormStoreType;\n    field: Field;\n    @observable rule : ValidationRule;\n    @observable validationErrors: IValidationError[] = [];\n\n    @computed get isValid() : boolean {\n        return this.validationErrors.length == 0;\n    }\n\n    @computed get errors() : IValidationError[] {\n        return this.validationErrors;\n    }\n\n    formatError(errors: any): IValidationError {\n        return errors.map((e: any) => {\n            let prefixedMessage = e.error || \"\";\n            let unPrefixedMessage = e.error ? e.error.replace(`${e.attribute.toUpperCase()} `, \"\") : e.options.message;\n            return {id: this.field.id,\n                name: e.attribute,\n                message: unPrefixedMessage,\n                prefixedMessage: prefixedMessage,\n                validator: e.validator\n            };\n        });\n    }\n\n    @computed get isValidateable() {\n        let {field} = this;\n        return !this.store.validationDisabled && !field.isHidden && field.conditionState && !!this.rule && Object.keys(this.rule).length > 0;\n    }\n\n    @action validate() {\n        if (this.isValidateable == true) {\n            let {field, store} = this;\n            let {id} = field;\n            let constraints = {};\n            constraints[field.id] = this.rule.constraints;\n            validate.formatters.custom = this.formatError.bind(this);\n            let values = toJS(store.values);\n\n            this.validationErrors = validate(values, constraints, {format: \"custom\"}) || [];\n            if (this.validationErrors.length > 0) {\n                this.store.setFieldError(id, this.validationErrors[0].message);\n            } else {\n                this.store.setFieldError(id, undefined);\n            }\n        } else {\n            this.validationErrors = [];\n        }\n    }\n\n    @computed get isRequired() : boolean {\n        return !!this.rule.presence;\n    }\n\n    @action initialize(data: IValidationProps) {\n        this.rule = new ValidationRule(data.rule || {} as IValidationRule);\n        this.store = data.store;\n        this.field = data.field;\n    }\n\n    constructor(data: IValidationProps) {\n        this.initialize(data);\n    }\n}","import { observable } from \"mobx\";\nimport { Field } from \"../models/field\";\nimport { Form } from \"../models/form\";\nimport { Page } from \"../models/page\";\n\nexport const createFormStore = () => {\n    const store = {\n        errors : {},\n        values: {},\n        touched: {},\n        currentPage: 0,\n        debug : (window && window.location.hostname.indexOf('localhost') > -1) ? true : false,\n        form :<Form> null,\n        isReady: false,\n        submitting: false,\n        validationDisabled: false,\n        conditionsDisabled: false,\n        get idFieldMap() : { [key:string]:Field; } {\n            if (!this.form) {\n                return {}\n            }\n            return this.form.content.pages.reduce((all: {}, p: Page) => {\n                return {...all, ...p.idFieldMap};\n            }, {});\n        },\n        get uuidFieldMap() : { [key:string]:Field; } {\n            if (!this.form) {\n                return {}\n            }\n            return this.form.content.pages.reduce((all: {}, p: Page) => {\n                return {...all, ...p.uuidFieldMap};\n            }, {});\n        },\n        get fieldNames() : string[] {\n            if (!this.form) {\n                return []\n            }\n            return this.form.content.pages.reduce((all: string[], p: Page) => {\n                return all.concat(p.fieldNames);\n            }, <string[]>[])\n        },\n        get isValid() : boolean {\n            if (this.form && this.form.content && this.form.content.pages && this.form.content.pages.length > 0) {\n                return this.form.content.pages.every((p: Page) => {\n                    return p.isValid\n                })\n            } else {\n                return true;\n            }\n        },\n        setSubmitting(value: boolean) {\n            this.submitting = value;\n        },\n        get isSubmitting() : boolean {\n            return this.submitting;\n        },\n        get numPages() : number {\n            return this.form ? this.form.content.pages.length : 0;\n        },\n        get hasNextPage() : boolean {\n            return this.currentPage < this.numPages -1;\n        },\n        get hasPrevPage() : boolean {\n            return this.currentPage > 0 && this.numPages > 1\n        },\n        get isSubmittable() : boolean {\n            return !(Object.keys(this.touched).length == 0 || !this.isValid|| this.isSubmitting);\n        },\n        nextPage : function () {\n            if(!this.form) {\n                return;\n            }\n            let currentPage = this.form.content.pages[this.currentPage] as Page;\n            let errors = currentPage.errors;\n            let {validationDisablesPaging} = this.form.formLayoutOptions;\n            // Highlight all errors\n            currentPage.fieldIds.forEach((id: string) => {\n                this.touched[id] = true;\n            });\n            if (!errors || errors.length == 0||validationDisablesPaging == false) {\n                this.currentPage = this.currentPage + 1;\n            }\n        },\n        prevPage : function() {\n            this.currentPage = this.currentPage - 1;\n        },\n        setForm : function (form: Form) {\n            this.form = form;\n        },\n        setFieldValue: function (id: string, value: any) {\n            this.values[id] = value;\n        },\n        setFieldTouched: function (id: string) {\n            this.touched[id] = true;\n        },\n        setFieldError: function (id: string, error: any) {\n            this.errors[id] = error;\n        }\n    }\n    return observable(store);\n}\n\nexport type FormStoreType = ReturnType<typeof createFormStore>;","import * as React from \"react\";\nimport {FormStoreType, createFormStore} from \"./FormStore\";\nimport { useLocalStore } from \"mobx-react\";\nimport { IFormProps } from '../models/form.properties';\nimport { Factory } from '../models/factory';\nexport const formStoreContext = React.createContext<FormStoreType | null>(null);\n\nexport interface FormStoreProviderProps {\n  initialState?: IFormProps;\n  formStore?: FormStoreType;\n}\n\nexport const FormStoreProvider: React.FC<FormStoreProviderProps> = (props) => {\n    let store;\n    if (props.formStore) {\n        store = props.formStore;\n    } else if (props.initialState) {\n        store = useLocalStore(createFormStore);\n        store.setForm(Factory.makeForm(store, props.initialState));\n    } else {\n      throw new Error(\"FormStoreProvider - Pass initialState or formStore\")\n    }\n    return (\n      <formStoreContext.Provider value={store}>\n        {props.children}\n      </formStoreContext.Provider>\n    )\n}","module.exports = antd;","module.exports = moment;","module.exports = React;","module.exports = ReactDOM;"],"sourceRoot":""}