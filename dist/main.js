window.Forms=function(e){function t(t){for(var l,o,i=t[0],s=t[1],c=t[2],p=0,d=[];p<i.length;p++)o=i[p],n[o]&&d.push(n[o][0]),n[o]=0;for(l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l]);for(u&&u(t);d.length;)d.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],l=!0,i=1;i<r.length;i++){var s=r[i];0!==n[s]&&(l=!1)}l&&(a.splice(t--,1),e=o(o.s=r[0]))}return e}var l={},n={0:0,1:0},a=[];function o(t){if(l[t])return l[t].exports;var r=l[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=l,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)o.d(r,l,function(t){return e[t]}.bind(null,l));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window.webpackJsonpForms=window.webpackJsonpForms||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=s;return a.push([44,2]),r()}({0:function(e,t){e.exports=window.React},1:function(e,t){e.exports=window.antd},16:function(e,t){e.exports=window.ReactDOM},2:function(e,t){e.exports=window.mobx},3:function(e,t){e.exports=window.mobxReact},44:function(e,t,r){"use strict";r.r(t);var l=r(1),n=r(15),a=r(18),o=r.n(a),i=r(0),s=r.n(i),c=r(16),u=r(2);const p=r(21);function d(e,t){return null!=e?e:t}function h(){return p()}var m=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};class f{constructor(e,t){this._type="Page",this.initialize(e,t)}get fieldNames(){let e=[];return this.sections&&0!=this.sections.length?(this.sections.forEach(t=>{t.columns&&t.columns.length>0&&t.columns.forEach(t=>{t.fields&&t.fields.forEach(t=>{e.push(t.name)})})}),e):e}get fieldIds(){let e=[];return this.sections&&0!=this.sections.length?(this.sections.forEach(t=>{t.columns&&t.columns.length>0&&t.columns.forEach(t=>{t.fields&&t.fields.forEach(t=>{e.push(t.id)})})}),e):e}get fieldMetadata(){return this.sections.reduce((e,t)=>Object.assign({},e,t.fieldMetadata),{})}get errors(){return this.sections.reduce((e,t)=>e.concat(t.errors),[])}get isValid(){return this.sections.every(e=>e.isValid)}get numSections(){return this.sections.length}get numFields(){return this.sections.reduce((e,t)=>e+t.numFields,0)}addSection(e,t){t?this.sections.splice(t,0,e):this.sections.push(e)}removeSection(e){this.sections.splice(e,1)}moveSection(e,t){this.sections.splice(t,0,this.sections.splice(e,1)[0])}initialize(e,t){this.id=e.id,this.uuid=d(e.uuid,h()),this.name=d(e.name,`${this._type}-${e.id}`),this.icon=d(e.name,""),this.sections=d(e.sections,[]),this.title=d(e.title,""),this.subtitle=d(e.subtitle,""),this.store=t}}m([u.computed],f.prototype,"fieldNames",null),m([u.computed],f.prototype,"fieldIds",null),m([u.computed],f.prototype,"fieldMetadata",null),m([u.computed],f.prototype,"errors",null),m([u.computed],f.prototype,"isValid",null),m([u.computed],f.prototype,"numSections",null),m([u.computed],f.prototype,"numFields",null),m([u.action],f.prototype,"addSection",null),m([u.action],f.prototype,"removeSection",null),m([u.action],f.prototype,"moveSection",null),m([u.action],f.prototype,"initialize",null),Object(u.decorate)(f,{id:u.observable,name:u.observable,uuid:u.observable,icon:u.observable,sections:u.observable,title:u.observable,subtitle:u.observable});var b=f,y=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};class g{constructor(e,t){this.operator="or",this.initialize(e,t)}initialize(e,t){if(!e.condition||-1==g.PredicateConditions.indexOf(e.condition))throw new Error(`InvalidPredicateCondition - ${e.condition}`);if(e.operator&&-1==g.PredicateOperators.indexOf(e.operator))throw new Error(`InvalidPredicateOperator - ${e.operator}`);this.uuid=e.uuid,this.store=t,this.field=e.field,this.condition=e.condition,this.value=e.value,this.operator=e.operator}}g.PredicateConditions=["eq","neq","gt","lt","gteq","lteq","hasval","nothasval"],g.PredicateOperators=["or","and"],y([u.action],g.prototype,"initialize",null),Object(u.decorate)(g,{field:u.observable,condition:u.observable,value:u.observable,operator:u.observable});var v=g,E=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};class P{constructor(e,t){this.initialize(e,t)}initialize(e,t){let r=[];e.predicates.forEach(e=>{r.push(new v(e,t))}),this.predicates=r,this.ancestors=[],this.store=t;let l=this;this.predicates.forEach(e=>{l.ancestors.push(e.field)})}addPredicates(...e){e.forEach(e=>{this.predicates.push(new v(e,this.store)),this.ancestors.push(e.field)})}reduce(e,t,r){return console.log("Reduce",e,t,r),"and"==r?e&&t:e||t}get value(){var e;let t=this;return!this.predicates||0==this.predicates.length||(this.predicates.forEach((r,l)=>{let n=t.store.values[r.field];var a=null;switch(r.condition){case"eq":a=n==r.value;break;case"neq":a=n!=r.value;break;case"gt":a=n>r.value;break;case"lt":a=n<r.value;break;case"gteq":a=n>=r.value;break;case"lteq":a=n<=r.value;break;case"hasval":a=void 0!==n&&null!=n&&""!==n;break;case"nothasval":a=void 0===n||null==n||""==n;break;default:a=!1}e=0==l?a:this.reduce(e,a,r.operator)}),e)}}E([u.action],P.prototype,"initialize",null),E([u.action],P.prototype,"addPredicates",null),E([u.computed],P.prototype,"value",null),Object(u.decorate)(P,{predicates:u.observable,ancestors:u.observable});var O=P,C=r(4),R=r.n(C),j=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};const x=[{key:"date",label:"Date",value:"date"},{key:"datetime",label:"Datetime",value:"datetime"},{key:"email",label:"Email",value:"email"},{key:"equality",label:"Equals",value:"equality"},{key:"exclusion",label:"Excludes",value:"exclusion"},{key:"format",label:"Matches",value:"format"},{key:"inclusion",label:"Includes",value:"inclusion"},{key:"length",label:"Length",value:"length"},{key:"numericality",label:"Numeric",value:"numericality"},{key:"presence",label:"Present",value:"presence"},{key:"url",label:"URL",value:"url"}],w={date:"Date",datetime:"Datetime",email:"Email",equality:"Equals",exclusion:"Excludes",format:"Matches",inclusion:"Includes",length:"Length",numericality:"Numeric",presence:"Present",url:"URL"};class S{constructor(e){this.initialize(e)}initialize(e={}){this.date=e.date,this.datetime=e.datetime,this.email=e.email,this.equality=e.equality,this.exclusion=e.exclusion,this.format=e.format,this.inclusion=e.inclusion,this.length=e.length,this.numericality=e.numericality,this.presence=e.presence,this.url=e.url}get constraints(){let e={};return Object.keys(w).forEach(t=>{this[t]&&(e[t]=Object(u.toJS)(this[t]))}),e}addConstraint(e,t){this[e]=t}updateConstraint(e,t){this[e]=t}removeConstraint(e){this[e]=null,console.log("After remove constraint",this.constraints)}}j([u.action],S.prototype,"initialize",null),j([u.computed],S.prototype,"constraints",null),j([u.action],S.prototype,"addConstraint",null),j([u.action],S.prototype,"updateConstraint",null),j([u.action],S.prototype,"removeConstraint",null),Object(u.decorate)(S,{date:u.observable,datetime:u.observable,email:u.observable,equality:u.observable,exclusion:u.observable,format:u.observable,inclusion:u.observable,length:u.observable,numericality:u.observable,presence:u.observable,url:u.observable});var T=S,k=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},F=r(24);F.extend(F.validators.datetime,{parse:function(e,t){return+R.a.utc(e)},format:function(e,t={}){var r=t.dateOnly?"YYYY-MM-DD":"YYYY-MM-DD hh:mm:ss";return R.a.utc(e).format(r)}});class V{constructor(e){this.validationErrors=[],this.initialize(e)}get isValid(){return 0==this.validationErrors.length}get errors(){return this.validationErrors}formatError(e){return e.map(e=>{console.log("Validation Error",e);let t=e.error||"",r=e.error?e.error.replace(`${e.attribute.toUpperCase()} `,""):e.options.message;return{id:this.field.id,name:e.attribute,message:r,prefixedMessage:t,validator:e.validator}})}get isValidateable(){let{field:e}=this;return!e.isHidden&&e.conditionState&&!!this.rule&&Object.keys(this.rule).length>0}validate(){if(1==this.field.isValidateable){let{field:e,store:t}=this,{id:r}=e,l={};l[e.id]=this.rule.constraints,F.formatters.custom=this.formatError.bind(this);let n=Object(u.toJS)(t.values);this.validationErrors=F(n,l,{format:"custom"})||[],console.log("Using constraints",Object(u.toJS)(l),Object(u.toJS)(this.validationErrors)),this.validationErrors.length>0?this.store.setFieldError(r,this.validationErrors[0].message):this.store.setFieldError(r,void 0)}else this.validationErrors=[]}get isRequired(){return!!this.rule.presence}initialize(e){this.rule=new T(e.rule||{}),this.store=e.store,this.field=e.field}}k([u.computed],V.prototype,"isValid",null),k([u.computed],V.prototype,"errors",null),k([u.computed],V.prototype,"isValidateable",null),k([u.action],V.prototype,"validate",null),k([u.computed],V.prototype,"isRequired",null),k([u.action],V.prototype,"initialize",null),Object(u.decorate)(V,{rule:u.observable,validationErrors:u.observable});var I=V,D=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};class M{constructor(e,t){this._type="Field",this.initialize(e,t)}mergeUpdate(e){this.id=e.id,this.name=e.name,this.label=e.label,this.helpText=e.helpText,this.placeholder=e.placeholder,this.valuePropName=e.valuePropName,this.componentProps=Object.assign({},this.componentProps,e.componentProps)}initialize(e,t){this.store=t,this.id=e.id,this.uuid=e.uuid||h(),this.name=e.name||`${this._type}_${e.id}`,this.type=e.type,this.label=e.label,this.inputType=e.inputType,this.valuePropName=e.valuePropName||this.name,this.validation=e.validation,this.validator=new I({rule:new T(e.validation),field:this,store:t}),this.storage=e.storage,this.label=e.label,this.helpText=e.helpText,this.placeholder=e.placeholder,this.componentProps=e.componentProps,this.componentProps&&this.componentProps.defaultValue?this.setValue(this.componentProps.defaultValue):this.componentProps&&this.componentProps.defaultChecked&&this.setValue(this.componentProps.defaultChecked),this.valuePropName=this.valuePropName?this.valuePropName:`${this.id}_value`,"daterange"==this.inputType&&(this.componentProps.startValuePropsName=this.componentProps.startValuePropsName?this.componentProps.startValuePropsName:"start_date",this.componentProps.endValuePropsName=this.componentProps.endValuePropsName?this.componentProps.endValuePropsName:"end_date"),e.condition?this.setCondition(e.condition):(this.condition=null,this.conditionState=!0),this.validate()}get className(){return`.fl-field .fl-${this.inputType}${this.type?"-"+this.type:""}`}get isTouched(){return this.store.touched[this.id]}get isValidateable(){return this.validator.isValidateable}get isValid(){return this.validator.isValid}get isHidden(){return"hidden"==this.inputType}get isRequired(){return!!this.validator.rule.presence}get currentValue(){return this.value}get isDisabled(){return!this.conditionState}setValue(e){this.value=e,this.store.setFieldValue(this.id,e),this.validate()}setTouched(){this.store.setFieldTouched(this.id),this.validate()}setConditionState(e){this.conditionState=e}setCondition(e){if(null==e)return this.condition=null,this.conditionState=!0,this._dispose&&this._dispose(),void this.validate();this.condition=new O(e,this.store),this.conditionState=this.condition.value,this._dispose=Object(u.observe)(this.condition,"value",e=>{this.setConditionState(e.newValue),1==e.newValue&&this.validate()},!0)}validate(){this.validator.validate()}get serialize(){let e=Object(u.toJS)(this);return delete e.store,delete e.validator,JSON.stringify(e)}}D([u.action],M.prototype,"mergeUpdate",null),D([u.action],M.prototype,"initialize",null),D([u.computed],M.prototype,"className",null),D([u.computed],M.prototype,"isTouched",null),D([u.computed],M.prototype,"isValidateable",null),D([u.computed],M.prototype,"isValid",null),D([u.computed],M.prototype,"isHidden",null),D([u.computed],M.prototype,"isRequired",null),D([u.computed],M.prototype,"currentValue",null),D([u.computed],M.prototype,"isDisabled",null),D([u.action],M.prototype,"setValue",null),D([u.action],M.prototype,"setTouched",null),D([u.action],M.prototype,"setConditionState",null),D([u.action],M.prototype,"setCondition",null),D([u.action],M.prototype,"validate",null),D([u.computed],M.prototype,"serialize",null),Object(u.decorate)(M,{id:u.observable,name:u.observable,uuid:u.observable,type:u.observable,label:u.observable,value:u.observable,inputType:u.observable,helpText:u.observable,placeholder:u.observable,validation:u.observable,options:u.observable,valuePropName:u.observable,condition:u.observable,storage:u.observable,conditionState:u.observable,validator:u.observable,componentProps:u.observable});var N=M,q=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};class Y{constructor(e,t){this._type="Column",this.initialize(e,t)}get errors(){return this.fields.reduce((e,t)=>e.concat(t.validator.errors),[])}get isValid(){return this.fields.every((e,t)=>e.isValid)}get fieldMetadata(){return this.fields.reduce((e,t)=>(e[t.id]={id:t.id,name:t.name,type:t.type,inputType:t.inputType,valuePropName:t.valuePropName},e),{})}get numFields(){return this.fields.length}addField(e,t){t?this.fields.splice(t,0,e):this.fields.push(e)}removeField(e){this.fields.splice(e,1)}moveField(e,t){this.fields.splice(t,0,this.fields.splice(e,1)[0])}initialize(e,t){this.uuid=d(e.uuid,h()),this.store=t,this.id=e.id,this.name=d(e.name,`${this._type}-${e.id}`),this.title=d(e.title,""),this.fields=d(e.fields,[])}}q([u.computed],Y.prototype,"errors",null),q([u.computed],Y.prototype,"isValid",null),q([u.computed],Y.prototype,"fieldMetadata",null),q([u.computed],Y.prototype,"numFields",null),q([u.action],Y.prototype,"addField",null),q([u.action],Y.prototype,"removeField",null),q([u.action],Y.prototype,"moveField",null),q([u.action],Y.prototype,"initialize",null),Object(u.decorate)(Y,{name:u.observable,uuid:u.observable,id:u.observable,title:u.observable,fields:u.observable});var z=Y,_=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};class L{constructor(e,t){this._type="Section",this.initialize(e,t)}get errors(){return this.columns.reduce((e,t)=>e.concat(t.errors),[])}get numFields(){return this.columns.reduce((e,t)=>e+=t.numFields,0)}addColumn(e,t){t?this.columns.splice(t,0,e):this.columns.push(e)}removeColumn(e){this.columns.splice(e,1)}moveColumn(e,t){this.columns.splice(t,0,this.columns.splice(e,1)[0])}get numColumns(){return this.columns.length}get isValid(){return this.columns.every(e=>e.isValid)}get fieldMetadata(){return this.columns.reduce((e,t)=>Object.assign({},e,t.fieldMetadata),{})}initialize(e,t){this.id=e.id,this.uuid=d(e.uuid,h()),this.name=d(e.name,`${this._type}-${e.id}`),this.title=d(e.title,""),this.gutter=d(e.gutter,0),this.columns=d(e.columns,[]),this.store=t}}_([u.computed],L.prototype,"errors",null),_([u.computed],L.prototype,"numFields",null),_([u.action],L.prototype,"addColumn",null),_([u.action],L.prototype,"removeColumn",null),_([u.action],L.prototype,"moveColumn",null),_([u.computed],L.prototype,"numColumns",null),_([u.computed],L.prototype,"isValid",null),_([u.computed],L.prototype,"fieldMetadata",null),_([u.action],L.prototype,"initialize",null),Object(u.decorate)(L,{name:u.observable,id:u.observable,uuid:u.observable,title:u.observable,gutter:u.observable,columns:u.observable});var B=L,A=r(17),$=r.n(A),J=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};class H{constructor(e,t){this.initialize(e,t)}initialize(e,t){this.store=t,this.id=e.id,this.uuid=d(e.uuid,h()),this.exid=d(e.exid,null),this.desc=d(e.desc,null),e.tenant?this.tenant={eid:d(e.tenant.eid,null),mid:d(e.tenant.mid,null),context:d(e.tenant.context,null),stack:d(e.tenant.stack,null)}:this.tenant={eid:null,mid:null,context:null,stack:null},e.status?this.status={timezone:d(e.status.timezone,null),paused:d(e.status.paused,null),active:d(e.status.active,null),created:d(e.status.created,null),edited:d(e.status.edited,null),starts:d(e.status.starts,null),ends:d(e.status.ends,null)}:this.status={timezone:null,paused:!1,active:!1,created:null,edited:null,starts:null,ends:null},e.content?(this.content={title:d(e.content.title,null),subtitle:d(e.content.subtitle,null),labels:d(e.content.labels,null),offset:d(e.content.offset,null),width:d(e.content.width,null),sidebar:d(e.content.sidebar,null),scripts:d(e.content.scripts,null),styles:d(e.content.styles,null),datasets:d(e.content.datasets,null),pages:d(e.content.pages,[]),paginate:d(e.content.paginate,!1)},e.content.css?this.content.css={inline:d(e.content.css.inline,[]),external:d(e.content.css.external,[])}:this.content.css={inline:null,external:null},e.content.header?this.content.header={rows:d(e.content.header.rows,[])}:this.content.header={rows:[]},e.content.footer?this.content.footer={rows:d(e.content.footer.rows,[])}:this.content.footer={rows:[]},e.content.trackingPixels?this.content.trackingPixels=e.content.trackingPixels:this.content.trackingPixels=[]):(this.content={title:null,subtitle:null,labels:null,offset:null,width:null,sidebar:null,scripts:[],styles:[],datasets:[],pages:[],paginate:!0},this.content.css={inline:null,external:null},this.content.header={rows:[]},this.content.footer={rows:[]},this.content.trackingPixels=[]),this.values=d(e.values,{}),this.layout=d(e.layout,"vertical"),this.formLayoutOptions=d(e.formLayoutOptions,{})}get isValid(){return this.content.pages.every(e=>e.isValid)}get numPages(){return this.content.pages.length}get numFields(){return this.content.pages.reduce((e,t)=>e+t.numFields,0)}addPage(e,t){t?this.content.pages.splice(t,0,e):this.content.pages.push(e)}removePage(e){this.content.pages.splice(e,1)}movePage(e,t){this.content.pages.splice(t,0,this.content.pages.splice(e,1)[0])}get isSubmittable(){let e=!this.stopSubmit||!this.stopSubmit;return 0==this.errors.length&&e}get fieldMetadata(){return this.content.pages.reduce((e,t)=>Object.assign({},e,t.fieldMetadata),{})}get errors(){return this.content.pages.reduce((e,t)=>e.concat(t.errors),[])}handleSubmit(e){e.preventDefault(),e.stopPropagation(),this.store.setSubmitting(!0);let t=this.fieldMetadata,r={},l=Object(u.toJS)(this.store.values);Object.keys(this.store.values).forEach(e=>{let n=t[e].valuePropName||t[e].name;r[n]=l[e]}),this.isSubmittable&&this.submitTarget?$.a.post(this.submitTarget,r).catch(e=>{console.log("Submit Error",e),this.submitError="There was an error submitting this form",this.successRedirect&&setTimeout(()=>{window.location.href=this.successRedirect},5e3)}).then(()=>{this.store.setSubmitting(!1),this.successRedirect&&setTimeout(()=>{window.location.href=this.errorRedirect},5e3)}):console.dir(l)}}J([u.action],H.prototype,"initialize",null),J([u.computed],H.prototype,"isValid",null),J([u.computed],H.prototype,"numPages",null),J([u.computed],H.prototype,"numFields",null),J([u.action],H.prototype,"addPage",null),J([u.action],H.prototype,"removePage",null),J([u.action],H.prototype,"movePage",null),J([u.computed],H.prototype,"isSubmittable",null),J([u.computed],H.prototype,"fieldMetadata",null),J([u.computed],H.prototype,"errors",null),J([u.action.bound],H.prototype,"handleSubmit",null),Object(u.decorate)(H,{id:u.observable,exid:u.observable,desc:u.observable,name:u.observable,tenant:u.observable,status:u.observable,content:u.observable,values:u.observable,layout:u.observable,stopSubmit:u.observable,submitTarget:u.observable,submitError:u.observable,formLayoutOptions:u.observable});var G=H;class U{constructor(e){this.store=e}makeSections(...e){let t=[];return e&&0!=e.length?(e.forEach(e=>{let r=e.columns&&e.columns.length>0?this.makeColumns(...e.columns):[];t.push(new B(Object.assign({},e,{columns:r}),this.store))}),t):[]}makeColumns(...e){let t=[];return e&&0!=e.length?(e.forEach(e=>{let r=this.makeFields(...e.fields),l=new z(Object.assign({},e,{fields:r}),this.store);t.push(l)}),t):t}makePredicates(...e){let t=[];return e.forEach(e=>{e.uuid||(e.uuid=h()),t.push(new v(e,this.store))}),t}makeCondition(e){let t=this.makePredicates(...e.predicates);return new O({predicates:t},this.store)}makeFields(...e){return e&&0!=e.length?e.reduce((e,t)=>(e.push(new N(Object.assign({},t,{condition:t.condition}),this.store)),e),[]):[]}makePages(...e){if(!e||0==e.length)return[];let t=[];return e.forEach(e=>{let r=this.makeSections(...e.sections);t.push(new b(Object.assign({},e,{sections:r}),this.store))}),t}makeForm(e){if(e&&e.content&&e.content.pages)return e.content.pages=this.makePages(...e.content.pages),new G(e,this.store);return new G(e||{id:null,content:{pages:[]}},this.store)}}var Z=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};class W{constructor(e){this.initialize(e)}get fieldMeta(){return this.form.content.pages.reduce((e,t)=>Object.assign({},e,t.fieldMetadata),{})}get fieldNames(){return this.form.content.pages.reduce((e,t)=>e.concat(t.fieldNames),[])}get isValid(){return!!(!this.form.content&&this.form.content.pages&&this.form.content.pages.length>0)||this.form.content.pages.every(e=>e.isValid)}setSubmitting(e){this.submitting=e}get isSubmitting(){return this.submitting}get numPages(){return this.form.content.pages.length}nextPage(){let e=this.form.content.pages[this.currentPage],t=e.errors;t&&0!=t.length?e.fieldIds.forEach(e=>{this.touched[e]=!0}):this.currentPage=this.currentPage+1}prevPage(){this.currentPage=this.currentPage-1}setForm(e){this.form=e}setFieldValue(e,t){Object(u.set)(this.values,e,t)}setFieldTouched(e){Object(u.set)(this.touched,e,!0)}setFieldError(e,t){Object(u.set)(this.errors,e,t)}initialize(e){this.form=e.form,this.values=e.values||{},this.errors={},this.touched={},this.currentPage=0,this.debug=!!e.debug&&e.debug}}Z([u.computed],W.prototype,"fieldMeta",null),Z([u.computed],W.prototype,"fieldNames",null),Z([u.computed],W.prototype,"isValid",null),Z([u.action],W.prototype,"setSubmitting",null),Z([u.computed],W.prototype,"isSubmitting",null),Z([u.computed],W.prototype,"numPages",null),Z([u.action],W.prototype,"nextPage",null),Z([u.action],W.prototype,"prevPage",null),Z([u.action],W.prototype,"setForm",null),Z([u.action],W.prototype,"setFieldValue",null),Z([u.action],W.prototype,"setFieldTouched",null),Z([u.action],W.prototype,"setFieldError",null),Z([u.action],W.prototype,"initialize",null),Object(u.decorate)(W,{errors:u.observable,values:u.observable,touched:u.observable,form:u.observable,currentPage:u.observable,submitting:u.observable});var K=W,Q=r(3);let X=class extends i.Component{constructor(e){super(e)}render(){let{field:e,onChange:t,onBlur:r}=this.props,n=e.componentProps;return i.createElement("div",{id:e.id,"data-uuid":e.uuid,className:"fl-field fl-checkboxgroup-field"},i.createElement(l.Checkbox.Group,Object.assign({},n,{onChange:t,options:n.options})))}};X=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}([Q.observer],X);let ee=class extends i.Component{constructor(e){super(e)}render(){let{field:e,onChange:t}=this.props,r=e.componentProps;return i.createElement("div",{id:e.id,"data-uuid":e.uuid,className:"fl-field fl-checkbox-field"},i.createElement(l.Checkbox,Object.assign({},r,{onChange:t})))}};ee=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}([Q.observer],ee);let te=class extends i.Component{constructor(e){super(e)}render(){let{field:e,onChange:t}=this.props,r=e.componentProps,{dateFormat:n,mode:a}=r;if(a||(a="date"),!n)switch(a){case"date":n=R.a.HTML5_FMT.DATE;break;case"month":n=R.a.HTML5_FMT.MONTH;break;case"time":case"year":n=R.a.HTML5_FMT.TIME}return i.createElement("div",{id:e.id,"data-uuid":e.uuid,className:`fl-field fl-datepicker-field fl-datepicker-${a}`},i.createElement(l.DatePicker,{mode:r.mode,defaultValue:r.defaultValue?R()(r.defaultValue,n):null,format:r.dateFormat,onChange:e=>{let r=e.target?e.target.value:e;t(r?R()(r).format(n):null)}}))}};te=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}([Q.observer],te);let re=class extends i.Component{constructor(e){super(e),this.onChange=((e,t)=>{this.setState({dates:e});let{startValuePropsName:r,endValuePropsName:l}=this.props.field.componentProps;this.props.onChange({[r]:t[0],[l]:t[1]})});let{dateFormat:t,mode:r,defaultStartValue:l,defaultEndValue:n}=this.props.field.componentProps,a=r||"date";if(!t)switch(r){case"date":t=R.a.HTML5_FMT.DATE;break;case"month":t=R.a.HTML5_FMT.MONTH;break;case"time":case"year":t=R.a.HTML5_FMT.TIME}let o,i=l?R()(l,t):null,s=n?R()(n,t):null,{minStartDate:c}=this.props.field.componentProps;c&&(o=R()().add(Object(u.toJS)(c.relative)));let p=Object(u.observe)(e.field,"componentProps",e=>{let t=e.newValue,r={};t.dateFormat&&(r.dateFormat=t.dateFormat),t.defaultStart&&(r.dates=this.state.defaultValue.splice()),t?this.setState({minStart:R()().add(Object(u.toJS)(e.newValue.relative))}):this.setState({minStart:null})});this.state={defaultValue:[i,s],dates:[i,s],mode:a,dateFormat:t,minStart:o,disposer:p}}componentWillUnmount(){this.state.disposer()}render(){let{field:e}=this.props;return i.createElement("div",{id:e.id,"data-uuid":e.uuid,className:"fl-field fl-daterange-field"},i.createElement("span",{id:`${e.id}-start`,className:"fl-daterange-field-start",style:{marginRight:"5px"}},i.createElement(l.DatePicker.RangePicker,{onChange:this.onChange,format:this.state.dateFormat})))}};re=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}([Q.observer],re);let le=class extends i.Component{constructor(e){super(e)}render(){let{field:e,onChange:t,onBlur:r}=this.props,n=e.componentProps;return i.createElement("div",{id:e.id,"data-uuid":e.uuid,className:`fl-field fl-${e.inputType}-${e.type}-field`},i.createElement(l.Input,Object.assign({},n,{defaultValue:n.defaultValue,onChange:t,onBlur:r})))}};le=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}([Q.observer],le);let ne=class extends i.Component{constructor(e){super(e)}render(){let{field:e,onChange:t,onBlur:r}=this.props,n=e.componentProps;return i.createElement("div",{id:e.id,"data-uuid":e.uuid,className:"fl-field fl-number-field"},i.createElement(l.InputNumber,Object.assign({},n,{onChange:e=>{e&&t(parseInt(e))},onBlur:r})))}};ne=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}([Q.observer],ne);let ae=class extends i.Component{constructor(e){super(e)}render(){let{field:e,onChange:t}=this.props,r=e.componentProps;return i.createElement("div",{id:e.id,"data-uuid":e.uuid,className:"fl-field fl-radiogroup-field"},i.createElement(l.Radio.Group,{onChange:t,defaultValue:r.defaultValue,options:r.options}))}};ae=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}([Q.observer],ae);let oe=class extends i.Component{constructor(e){super(e)}render(){let{field:e,onBlur:t,onChange:r}=this.props,n=e.componentProps;return i.createElement("div",{id:e.id,"data-uuid":e.uuid,className:"fl-field fl-select-field"},i.createElement(l.Select,Object.assign({},n,{onChange:r,onBlur:t}),n.options.map((t,r)=>i.createElement(l.Select.Option,{key:e.id+"-option-"+r,value:t.value},t.label))))}};oe=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}([Q.observer],oe);let ie=class extends i.Component{constructor(e){super(e)}render(){let{field:e,onChange:t}=this.props,r=e.componentProps;return i.createElement("div",{id:e.id,"data-uuid":e.uuid,className:"fl-field fl-cascader-field"},i.createElement(l.Cascader,Object.assign({},r,{onChange:t})))}};ie=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}([Q.observer],ie);let se=class extends i.Component{constructor(e){super(e)}render(){let{field:e,onChange:t}=this.props,r=e.componentProps;return i.createElement("div",{id:e.id,"data-uuid":e.uuid,className:"fl-field fl-starrating-field"},i.createElement(l.Rate,Object.assign({},r,{onChange:t})))}};se=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}([Q.observer],se);let ce=class extends i.Component{constructor(e){super(e)}render(){let{field:e,onChange:t}=this.props,r=e.componentProps;return i.createElement("div",{id:e.id,"data-uuid":e.uuid,className:"fl-field fl-switch-field"},i.createElement(l.Switch,Object.assign({},r,{onChange:t})))}};ce=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}([Q.observer],ce);let ue=class extends i.Component{constructor(e){super(e),this.filterOption=((e,t)=>t.description.indexOf(e)>-1)}render(){let{field:e,onChange:t}=this.props,r=e.componentProps;return i.createElement("div",{id:e.id,"data-uuid":e.uuid,className:"fl-field fl-transfer-field"},i.createElement(l.Transfer,Object.assign({},r,{onChange:t,render:e=>e.title})))}};ue=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}([Q.observer],ue);let pe=class extends i.Component{constructor(e){super(e)}render(){let{field:e,onChange:t}=this.props,r=e.componentProps;return i.createElement("div",{id:e.id,"data-uuid":e.uuid,className:"fl-field fl-slider-field"},i.createElement(l.Slider,Object.assign({},r,{onChange:t})))}};pe=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}([Q.observer],pe);let de=class extends i.Component{constructor(e){super(e)}render(){let{field:e,onChange:t}=this.props,r=e.componentProps;return i.createElement("div",{id:e.id,"data-uuid":e.uuid,className:"fl-field fl-textarea-field"},i.createElement(l.Input.TextArea,Object.assign({},r,{onChange:t})))}};de=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}([Q.observer],de);let he=class extends i.Component{constructor(e){super(e)}render(){let{field:e}=this.props;return i.createElement("div",{className:"fl-field fl-textblock-field"},i.createElement("p",{id:e.id,"data-uuid":e.uuid},e.value))}};he=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}([Q.observer],he);let me=class extends i.Component{constructor(e){super(e),this.props=e}render(){const{field:e,store:t}=this.props,{inputType:r}=e;let n=t=>{let r=t&&"object"==typeof t&&t.target?t.target.value:t;e.setValue(r)},a=()=>e.setTouched(),{id:o}=e;return!e.isDisabled&&i.createElement(l.Form.Item,{label:e.label,hasFeedback:!(!t.touched[o]||!t.errors[o]),validateStatus:t.touched[o]&&t.errors[o]?"error":"validating",help:t.touched[o]&&t.errors[o]?t.errors[o]:e.helpText,required:e.isRequired},"input"==r&&i.createElement(le,{field:e,onChange:n,onBlur:a}),"checkbox"==r&&i.createElement(ee,{field:e,onChange:n}),"number"==r&&i.createElement(ne,{field:e,onChange:n,onBlur:a}),"select"==r&&i.createElement(oe,{field:e,onChange:n,onBlur:a}),"cascader"==r&&i.createElement(ie,{field:e,onChange:n}),"radiogroup"==r&&i.createElement(ae,{field:e,onChange:n}),"checkboxgroup"==r&&i.createElement(X,{field:e,onChange:n}),"textarea"==r&&i.createElement(de,{field:e,onChange:n}),"daterange"==r&&i.createElement(re,{field:e,onChange:n}),"datepicker"==r&&i.createElement(te,{field:e,onChange:n}),"monthpicker"==r&&i.createElement(te,{field:e,onChange:n}),"timepicker"==r&&i.createElement(te,{field:e,onChange:n}),"yearpicker"==r&&i.createElement(te,{field:e,onChange:n}),"starrating"==r&&i.createElement(se,{field:e,onChange:n}),"switch"==r&&i.createElement(ce,{field:e,onChange:n}),"transfer"==r&&i.createElement(ue,{field:e,onChange:n}),"slider"==r&&i.createElement(pe,{field:e,onChange:n}),"textblock"==r&&i.createElement(he,{field:e,onChange:n}))}};me=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}([Q.observer],me);let fe=class extends i.Component{constructor(e){super(e),this.props=e}render(){let{store:e,column:t}=this.props;const{fields:r}=t;return i.createElement("div",{id:t.id,className:"form-col"},i.createElement(l.Col,{span:this.props.span},r.map(t=>i.createElement(me,{field:t,store:e,key:t.uuid}))))}};fe=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}([Q.observer],fe);let be=class extends i.Component{constructor(e){super(e),this.props=e}render(){let{store:e,section:t}=this.props;const r=t.columns.length;return i.createElement("div",{id:t.id},i.createElement(l.Card,{bordered:!0,title:t.name},i.createElement(l.Row,{gutter:24},t.columns.map((t,l)=>i.createElement(fe,{store:e,key:t.uuid,column:t,span:24/r})))))}};be=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}([Q.observer],be);let ye=class extends i.Component{constructor(e){super(e),this.props=e}render(){let{store:e,page:t}=this.props;return i.createElement("div",{className:"page-content"},i.createElement(l.Card,{title:t.title},i.createElement("div",{className:"page"},t.sections.map((t,r)=>i.createElement(be,{key:t.uuid,store:e,section:t})))))}};ye=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}([Q.observer],ye);let ge=class extends i.Component{constructor(e){super(e),this.setField=(e=>{this.setState({field:e})}),this.setExpression=(e=>{this.setState({expression:e})}),this.setValue=(e=>{this.setState({value:e.target.value})}),this.setOperator=(e=>{this.setState({operator:e})}),this.handleSubmit=(e=>{e.preventDefault(),e.stopPropagation(),this.addPredicate({field:this.state.field,condition:this.state.expression,value:this.state.value,operator:this.state.operator}),this.setState({field:null,expression:null,value:null,operator:null})}),this.state={field:null,expression:null,value:null,operator:null}}addPredicate(e){let{editorStore:t}=this.props;t.addPredicate(e)}removePredicate(e){let{editorStore:t}=this.props;t.removePredicate(e)}render(){let{field:e,availableConditionSources:t,availableExpressions:r,availableOperators:n,hasCondition:a,numPredicates:o}=this.props.editorStore,s=[{title:"Field",dataIndex:"field",key:"field"},{title:"Condition",dataIndex:"condition",key:"condition"},{title:"Value",dataIndex:"value",key:"value"},{title:"Operator",dataIndex:"operator",key:"operator"},{title:"Action",key:"action",render:(e,t)=>i.createElement("span",null,i.createElement("a",{href:"javascript:;",onClick:e=>this.removePredicate(t.uuid)},"Delete"))}];return i.createElement("div",null,o>0&&i.createElement("div",null,i.createElement(l.Table,{dataSource:e.condition.predicates||[],columns:s,rowKey:"uuid"})),0==o&&i.createElement(l.Empty,{description:i.createElement("span",null,"No conditional rendering on this field")}),i.createElement(l.Divider,null),i.createElement(l.Form,{onSubmit:e=>this.handleSubmit(e)},i.createElement(l.Form.Item,{label:"Source field",help:"Field the condition will get its source value from",required:!0},i.createElement(l.Select,{showSearch:!0,onChange:e=>this.setField(e),value:this.state.field},t.map(t=>i.createElement(l.Select.Option,{key:t.id,value:t.id,disabled:e.id==t.id},t.name)))),i.createElement(l.Form.Item,{label:"Expression",help:"The expression to evaluate",required:!0},i.createElement(l.Select,{onChange:e=>this.setExpression(e),value:this.state.expression},r.map(e=>i.createElement(l.Select.Option,{key:e.value,value:e.value},e.name)))),i.createElement(l.Form.Item,{label:"Value",help:"The target value",required:!this.state.expression||this.state.expression.indexOf("hasval")>-1||!this.state.field},i.createElement(l.Input,{type:"text",disabled:!this.state.expression||this.state.expression.indexOf("hasval")>-1||!this.state.field,onChange:e=>this.setValue(e)})),i.createElement(l.Form.Item,{label:"Operator",help:"Operator to combine conditions"},i.createElement(l.Select,{onChange:e=>this.setOperator(e),value:this.state.operator,disabled:0==o},n.map(e=>i.createElement(l.Select.Option,{key:e.value,value:e.value},e.name)))),i.createElement(l.Form.Item,null,i.createElement(l.Button,{icon:"plus",htmlType:"submit",type:"primary",disabled:!this.state.field||!this.state.expression},"Add"))))}};ge=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}([Q.observer],ge);let ve=class extends i.Component{constructor(e){super(e),this.handleSubmit=(e=>{e.preventDefault(),e.stopPropagation();let{field:t}=this.props.editorStore;this.props.form.validateFieldsAndScroll((e,r)=>{if(!e){let e={componentProps:{}};Object.keys(r).forEach(t=>{0==t.indexOf("c_")?e.componentProps[t.replace("c_","")]=r[t]:e[t]=r[t]}),t.mergeUpdate(e)}})})}render(){let e=Object(u.toJS)(this.props.editorStore.field),{getFieldDecorator:t,getFieldValue:r}=this.props.form;return i.createElement(l.Form,Object.assign({},{labelcol:{span:8,offset:2},wrappercol:{span:8,offset:2}},{onSubmit:e=>this.handleSubmit(e)}),i.createElement(l.Form.Item,{label:"Name",required:!0},t("name",{initialValue:e.name,rules:[{type:"string"},{required:!0,message:"A name is required"}]})(i.createElement(l.Input,null))),i.createElement(l.Form.Item,{label:"Label",required:!0},t("label",{initialValue:e.label,rules:[{type:"string"},{required:!0,message:"A label is required"}]})(i.createElement(l.Input,null))),"checkbox"!==e.inputType&&i.createElement(l.Form.Item,{label:"Placeholder Text"},t("c_placeholder",{initialValue:e.componentProps.placeholder,rules:[{type:"string"}]})(i.createElement(l.Input,null))),0==e.inputType.indexOf("date")&&i.createElement(l.Form.Item,{label:"Date Format",required:!0},t("c_dateFormat",{initialValue:e.componentProps.dateFormat,rules:[{required:!0,message:"A date format is required"}]})(i.createElement(l.Select,null,i.createElement(l.Select.Option,{key:"dd-mm-yyyy",value:"DD-MM-YYYY"},"DD-MM-YYYY"),i.createElement(l.Select.Option,{key:"mm-dd-yyyy",value:"MM-DD-YYYY"},"MM-DD-YYYY"),i.createElement(l.Select.Option,{key:"yyyy-mm-dd",value:"YYYY-MM-DD"},"YYYY-MM-DD"),i.createElement(l.Select.Option,{key:"dd/mm/yyyy",value:"DD/MM/YYYY"},"DD/MM/YYYY"),i.createElement(l.Select.Option,{key:"mm/dd/yyyy",value:"MM/DD/YYYY"},"MM/DD/YYYY"),i.createElement(l.Select.Option,{key:"yyyy/mm/dd",value:"YYYY/MM/DD"},"YYYY/MM/DD"))),"  "),"daterange"==e.inputType&&i.createElement("div",null,i.createElement(l.Form.Item,{label:"Default start date"},t("c_defaultStartValue",{initialValue:e.componentProps.defaultStartValue})(i.createElement(l.DatePicker,{format:r("c_dateFormat")}))),i.createElement(l.Form.Item,{label:"Default end date"},t("c_defaultEndValue",{initialValue:e.componentProps.defaultEndValue})(i.createElement(l.DatePicker,{format:r("c_dateFormat")}))),i.createElement(l.Form.Item,{label:"Start date property name"},t("c_startValuePropsName",{initialValue:e.componentProps.startValuePropsName,rules:[{pattern:/^[aA-zZ][\w|_|0-9]+/,message:"Must be valid property name"}]})(i.createElement(l.Input,null))),i.createElement(l.Form.Item,{label:"End date property name"},t("c_endValuePropsName",{initialValue:e.componentProps.endValuePropsName,rules:[{pattern:/^[aA-zZ][\w|_|0-9]+/,message:"Must be valid property name"}]})(i.createElement(l.Input,null)))),"number"==e.inputType&&i.createElement(l.Form.Item,{label:"Default value"},t("c_defaultValue",{initialValue:e.componentProps.defaultValue,rules:[{type:"number"}]})(i.createElement(l.InputNumber,null))),"number"!==e.inputType&&"datepicker"!==e.inputType&&"daterange"!==e.inputType&&i.createElement(l.Form.Item,{label:"Default Value"},t("c_defaultValue",{initialValue:e.componentProps.defaultValue,rules:[{type:"string"}]})(i.createElement(l.Input,null))),e.inputType.indexOf("checkbox")>0&&i.createElement(l.Form.Item,{label:"Size"},t("c_size",{initialValue:e.componentProps.size,rules:[{type:"string"}]})(i.createElement(l.Select,null,i.createElement(l.Select.Option,{value:"default"},"default"),i.createElement(l.Select.Option,{value:"small"},"small"),i.createElement(l.Select.Option,{value:"large"},"large")))),"daterange"!==e.inputType&&i.createElement(l.Form.Item,{label:"Value property name",required:!0},t("valuePropName",{initialValue:e.valuePropName,rules:[{type:"string"},{required:!0,message:"A value property name is required"},{pattern:/^[aA-zZ][aA-zZ|_|0-9]+/,message:"Can only use a-z, underscore and numbers"}]})(i.createElement(l.Input,null))),i.createElement(l.Form.Item,{label:"Help Text"},t("helpText",{initialValue:e.helpText,rules:[{type:"string"}]})(i.createElement(l.Input.TextArea,null))),i.createElement(l.Form.Item,null,i.createElement(l.Button,{type:"primary",htmlType:"submit"},"Apply")))}};ve=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}([Q.observer],ve);var Ee=l.Form.create({name:"FieldPropertiesView"})(ve);let Pe=class extends i.Component{constructor(e){super(e)}render(){let e=[{title:"Rule",dataIndex:"name",key:"name"},{title:"Message",dataIndex:"defaultMessage",key:"defaultMessage"},{title:"Constraints",dataIndex:"constraint",key:"constraint",render:(e,t)=>i.createElement("ul",null,Object.keys(t.constraint).map(e=>"message"==e?null:i.createElement("li",{key:e},e," - ",t.constraint[e])))},{title:"Actions",key:"action",render:(e,t)=>i.createElement("span",null,i.createElement(l.Button,{shape:"circle",type:"default",onClick:e=>{this.props.onEdit(t.rule)},icon:"tool",size:"small",style:{marginRight:"5px"}}),i.createElement(l.Button,{shape:"circle",type:"danger",onClick:e=>{this.props.onRemove(t.rule)},icon:"delete",size:"small"}))}],t=0,r=[];if(this.props.validation&&this.props.validation.constraints){let{constraints:e}=this.props.validation;t=Object.keys(e).length,Object.keys(e).forEach((t,l)=>{let n={},{message:a}=e[t];n.rule=t,n.name=w[t],n.key=l,n.defaultMessage=a,n.constraint=e[t],r.push(n)})}return i.createElement(l.Table,{bordered:!0,pagination:t>5&&{position:"bottom"},dataSource:r,columns:e,rowKey:"key"})}};Pe=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}([Q.observer],Pe);let Oe=class extends i.Component{constructor(e){super(e),this.dateFormat="YYYY-MM-DD",this.applyRule=(()=>{console.log("Apply Rule",this.state),1==this.state.isEditing?this.props.editorStore.updateValidationRule(this.state.ruleType,this.state.properties):this.props.editorStore.addValidationRule(this.state.ruleType,this.state.properties),this.setState({rule:null,properties:{},isEditing:!1})}),this.onEdit=(e=>{this.setState({isEditing:!0,ruleType:e,properties:this.props.editorStore.field.validator.rule[e]})}),this.state={ruleType:null,properties:{},isValid:!1,isEditing:!1}}setRuleType(e){this.setState({ruleType:e})}setRuleProperty(e,t){this.setState({properties:Object.assign({},this.state.properties,{[e]:t})})}isRuleValid(){let{ruleType:e,properties:t}=this.state;if(!e)return!1;let r=!1;switch(this.state.ruleType){case"datetime":case"date":r=t.latest||t.latest;break;case"equality":r=!!t.attribute;break;case"exclusion":case"inclusion":r=!!t.within;break;case"format":r=!!t.pattern;break;case"length":r=!t.minimum&&!t.maximum&&t.is||(t.minimum||t.maximum)&&!t.is;break;case"numericality":r=t.is?!!t.strict&&2==Object.keys(t).length:Object.keys(t).length>0;break;case"presence":r=!!t.presence;break;case"url":r=!!t.url;break;default:r=!1}return r}render(){let{editorStore:e}=this.props,{field:t}=e,{fieldMeta:r}=e.formStore,n=[];return Object.keys(Object(u.toJS)(r)).map(e=>{n.push(r[e])}),i.createElement("div",null,i.createElement(Pe,{validation:t.validator.rule,onEdit:this.onEdit,onRemove:e.removeValidationRule}),i.createElement(l.Divider,null),i.createElement(l.Card,{title:`${1==this.state.isEditing?"Edit":"Add"} Validation Rule${this.state.ruleType?" - "+this.state.ruleType:""}`},i.createElement(l.Form,null,i.createElement(l.Form.Item,{label:"Rule"},i.createElement(l.Select,{onChange:e=>this.setRuleType(e),style:{width:200},placeholder:"Select a rule to apply",value:this.state.ruleType},x.map(e=>i.createElement(l.Select.Option,{disabled:!!t.validator.rule[e.value],key:e.key,value:e.value},e.label)))),i.createElement(l.Divider,null),i.createElement(l.Form.Item,{label:"Validation Message",help:"Default validation failure message"},i.createElement(l.Input,{type:"text",value:this.state.properties.message,onChange:e=>this.setRuleProperty("message",e.target.value)})),i.createElement(l.Divider,null),this.state.ruleType&&this.state.ruleType.indexOf("date")>-1&&i.createElement("div",null,i.createElement(l.Form.Item,{label:"Constraint - Not before",help:"Entered date cannot be before this date",required:!this.state.properties.latest},i.createElement(l.DatePicker,{value:this.state.properties.earliest,onChange:e=>{e?this.setRuleProperty("earliest",e.format(this.dateFormat)):this.setRuleProperty("earliest",void 0)}})),this.state.properties.earliest&&i.createElement(l.Form.Item,{label:"Message - Not Before",help:"Shown when 'Not Before' validation fails (optional)"},i.createElement(l.Input,{value:this.state.properties.tooEarly,type:"text",onChange:e=>this.setRuleProperty("tooEarly",e.target.value)})),i.createElement(l.Divider,null),i.createElement(l.Form.Item,{label:"Constraint - Not after",help:"Entered date cannot be after this date",required:!this.state.properties.earliest},i.createElement(l.DatePicker,{value:this.state.properties.latest,onChange:e=>{e?this.setRuleProperty("latest",e.format(this.dateFormat)):this.setRuleProperty("latest",void 0)}})),this.state.properties.latest&&i.createElement(l.Form.Item,{label:"Message - Not After",help:"Shown when 'Not After' validation fails (optional)"},i.createElement(l.Input,{value:this.state.properties.tooLate,type:"text",onChange:e=>this.setRuleProperty("tooLate",e.target.value)}))),"equality"==this.state.ruleType&&i.createElement("div",null,i.createElement(l.Form.Item,{label:"Constraint - Matches",help:"Value should match field",required:!0},i.createElement(l.Select,{value:this.state.properties.attribute,placeholder:"Select a field",onChange:e=>{this.setRuleProperty("attribute",e)},style:{width:200}},n.map(e=>i.createElement(l.Select.Option,{key:e.id,value:e.id,disabled:e.id==t.id},e.name," - (",e.type||e.inputType,")"))))),"exclusion"==this.state.ruleType&&i.createElement("div",null,i.createElement(l.Form.Item,{label:"Constraint - Not Within",help:"Value should not be one of (comma separated list)",required:!0},i.createElement(l.Input,{type:"text",value:this.state.properties.within,onChange:e=>{e&&e.target.value?this.setRuleProperty("within",e.target.value.split(",")):this.setRuleProperty("within",null)}}))),"inclusion"==this.state.ruleType&&i.createElement("div",null,i.createElement(l.Form.Item,{label:"Constraint - Within",help:"Value must be one of (comma separated list)",required:!0},i.createElement(l.Input,{type:"text",value:this.state.properties.within,onChange:e=>{e&&e.target.value?this.setRuleProperty("within",e.target.value.split(",")):this.setRuleProperty("within",null)}}))),"format"==this.state.ruleType&&i.createElement("div",null,i.createElement(l.Form.Item,{label:"Constraint - Regular Expression",help:"Value must match regular expression",required:!0},i.createElement(l.Input,{type:"text",value:this.state.properties.pattern,onChange:e=>{e&&e.target.value?this.setRuleProperty("pattern",e.target.value):this.setRuleProperty("pattern","/*/")}})),i.createElement(l.Form.Item,{label:"Option - Flags",help:"Regular expression flags - i|g|m",required:!0},i.createElement(l.Input,{type:"text",value:this.state.properties.flags,onChange:e=>{e&&e.target.value?this.setRuleProperty("flags",e.target.value):this.setRuleProperty("flags","i")}}))),"length"==this.state.ruleType&&i.createElement("div",null,i.createElement(l.Form.Item,{label:"Constraint - Exactly",help:"Value length must be exactly"},i.createElement(l.InputNumber,{type:"text",value:this.state.properties.is,onChange:e=>{null!=e&&(this.setRuleProperty("maximum",null),this.setRuleProperty("minimum",null),this.setRuleProperty("is",e),console.log(this.state))}})),this.state.properties.is&&i.createElement(l.Form.Item,{label:"Message - Exactly",help:"Shown when 'Exactly' validation fails (optional)"},i.createElement(l.Input,{type:"text",value:this.state.properties.wrongLength,onChange:e=>this.setRuleProperty("wrongLength",e.target.value)})),i.createElement(l.Divider,null),i.createElement(l.Form.Item,{label:"Constraint - Minimum",help:"Value length must be at least"},i.createElement(l.InputNumber,{type:"text",value:this.state.properties.minimum,disabled:!!this.state.properties.is,onChange:e=>{null!=e?this.setRuleProperty("minimum",e):this.setRuleProperty("minimum",-1)}})),this.state.properties.minimum&&i.createElement(l.Form.Item,{label:"Message - Minimum",help:"Shown when 'Minimum' validation fails (optional)"},i.createElement(l.Input,{type:"text",value:this.state.properties.tooShort,onChange:e=>this.setRuleProperty("tooShort",e.target.value)})),i.createElement(l.Divider,null),i.createElement(l.Form.Item,{label:"Constraint - Maximum",help:"Value length must be at most"},i.createElement(l.InputNumber,{type:"text",value:this.state.properties.maximum,disabled:!!this.state.properties.is,onChange:e=>{null!=e?this.setRuleProperty("maximum",e):this.setRuleProperty("maximum",null)}})),this.state.properties.maximum&&i.createElement(l.Form.Item,{label:"Message - Maximum",help:"Shown when 'Maximum' validation fails (optional)"},i.createElement(l.Input,{type:"text",value:this.state.properties.tooLong,onChange:e=>this.setRuleProperty("tooLong",e.target.value)}))),"numericality"==this.state.ruleType&&i.createElement("div",null,i.createElement(l.Form.Item,{label:"Constraint - Integer",help:"Value must be an integer"},i.createElement(l.Checkbox,{checked:this.state.properties.integerOnly,onChange:e=>{this.setRuleProperty("integerOnly",e.target.value)}})),i.createElement(l.Form.Item,{label:"Constraint - Greater Than",help:"Value must be greater than"},i.createElement(l.InputNumber,{value:this.state.properties.greaterThan,onChange:e=>{this.setRuleProperty("greaterThan",e)}})),this.state.properties.greaterThan&&i.createElement(l.Form.Item,{label:"Message - Greater than",help:"Shown when 'Greater Than' validation fails (optional)"},i.createElement(l.Input,{type:"text",value:this.state.properties.notGreaterThan,onChange:e=>this.setRuleProperty("notGreaterThan",e.target.value)})),i.createElement(l.Form.Item,{label:"Constraint - Greater Than Equal To",help:"Value must be greater than or equal to"},i.createElement(l.InputNumber,{value:this.state.properties.greaterThanOrEqualTo,onChange:e=>{this.setRuleProperty("greaterThanOrEqualTo",e)}})),this.state.properties.greaterThanOrEqualTo&&i.createElement(l.Form.Item,{label:"Message - Greater than or equal to",help:"Shown when 'Exactly' validation fails (optional)"},i.createElement(l.Input,{type:"text",value:this.state.properties.notGreaterThanOrEqualTo,onChange:e=>this.setRuleProperty("notGreaterThanOrEqualTo",e.target.value)})),i.createElement(l.Form.Item,{label:"Constraint - Equal To",help:"Value must be exactly"},i.createElement(l.InputNumber,{value:this.state.properties.equalTo,disabled:this.state.properties.greaterThanOrEqualTo||this.state.properties.lesserThanOrEqualTo||this.state.properties.greaterThan||this.state.properties.lesserThanThan,onChange:e=>{this.setRuleProperty("equalTo",e)}})),this.state.properties.equalTo&&i.createElement(l.Form.Item,{label:"Message - Equal to",help:"Shown when 'Equal to' validation fails (optional)"},i.createElement(l.Input,{type:"text",value:this.state.properties.notEqualTo,onChange:e=>this.setRuleProperty("notEqualTo",e.target.value)})),i.createElement(l.Form.Item,{label:"Constraint - Less Than",help:"Value must be less than"},i.createElement(l.InputNumber,{disabled:this.state.properties.equalTo,value:this.state.properties.lessThan,onChange:e=>{this.setRuleProperty("lessThan",e)}})),this.state.properties.lessThan&&i.createElement(l.Form.Item,{label:"Message - Less than",help:"Shown when 'Less than' validation fails (optional)"},i.createElement(l.Input,{type:"text",value:this.state.properties.notLessThan,onChange:e=>this.setRuleProperty("notLessThan",e.target.value)})),i.createElement(l.Form.Item,{label:"Constraint - Less Than Equal To",help:"Value must be less than or equal to"},i.createElement(l.InputNumber,{disabled:this.state.properties.equalTo,value:this.state.properties.lessThanOrEqualTo,onChange:e=>{this.setRuleProperty("lessThanOrEqualTo",e)}})),this.state.properties.lessThanOrEqualTo&&i.createElement(l.Form.Item,{label:"Message - Less than or equal to",help:"Shown when 'Less than or equal to' validation fails (optional)"},i.createElement(l.Input,{type:"text",value:this.state.properties.notLessThanOrEqualTo,onChange:e=>this.setRuleProperty("notLessThanOrEqualTo",e.target.value)})),i.createElement(l.Form.Item,{label:"Constraint - Divisible By",help:"Value must be divisible by"},i.createElement(l.InputNumber,{min:2,value:this.state.properties.divisibleBy,disabled:this.state.properties.equalTo,onChange:e=>{this.setRuleProperty("divisibleBy",e)}})),this.state.properties.divisibleBy&&i.createElement(l.Form.Item,{label:"Message - Not Divisible By",help:"Shown when 'Not Divisible By' validation fails (optional)"},i.createElement(l.Input,{type:"text",onChange:e=>this.setRuleProperty("notDivisibleBy",e.target.value)})),i.createElement(l.Form.Item,{label:"Constraint - Odd",help:"Value must be odd"},i.createElement(l.Checkbox,{checked:this.state.properties.odd,onChange:e=>{this.setRuleProperty("odd",e.target.value)}})),this.state.properties.odd&&i.createElement(l.Form.Item,{label:"Message - Not Odd",help:"Shown when 'Not Odd' validation fails (optional)"},i.createElement(l.Input,{type:"text",value:this.state.properties.notOdd,onChange:e=>this.setRuleProperty("notOdd",e.target.value)})),i.createElement(l.Form.Item,{label:"Constraint - Even",help:"Value must be even"},i.createElement(l.Checkbox,{checked:this.state.properties.even,onChange:e=>{this.setRuleProperty("even",e.target.value)}})),this.state.properties.even&&i.createElement(l.Form.Item,{label:"Message - Not Even",help:"Shown when 'Not Even' validation fails (optional)"},i.createElement(l.Input,{type:"text",value:this.state.properties.notEven,onChange:e=>this.setRuleProperty("notEven",e.target.value)}))),i.createElement(l.Form.Item,null,i.createElement(l.Button,{type:"primary",htmlType:"submit",disabled:!this.isRuleValid(),onClick:this.applyRule},1==this.state.isEditing?"Apply":"Add")))))}};Oe=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}([Q.observer],Oe);let Ce=class extends i.Component{constructor(e){super(e)}render(){let{editorStore:e}=this.props,{field:t}=e;return t&&i.createElement(l.Drawer,{title:`Field ${t.name} (id=${t.id} class=${t.className})`,width:800,onClose:()=>e.setField(null),visible:e.visible,style:{overflow:"auto",height:"calc(100% - 108px)",paddingBottom:"108px"}},e.field&&i.createElement(l.Tabs,null,i.createElement(l.Tabs.TabPane,{tab:"Properties",key:"1"},i.createElement(l.Row,null,i.createElement(l.Col,{span:20,offset:2},i.createElement(Ee,{editorStore:e})))),i.createElement(l.Tabs.TabPane,{tab:"Validation",key:"2"},i.createElement(l.Row,null,i.createElement(l.Col,{span:20,offset:2},i.createElement(Oe,{editorStore:e})))),i.createElement(l.Tabs.TabPane,{tab:"Condition",key:"3"},i.createElement(l.Row,null,i.createElement(l.Col,{span:20,offset:2},i.createElement(ge,{editorStore:e}))))))}};Ce=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}([Q.observer],Ce);var Re=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};class je{constructor(e){this.addCondition=(e=>{this.field.setCondition(this.factory.makeCondition(e))}),this.addPredicate=(e=>{if(this.field.condition)this.field.condition.addPredicates(...this.factory.makePredicates(e));else{let t=this.factory.makeCondition({predicates:[e]});this.field.setCondition(t)}}),this.setCondition=(e=>{this.field.setCondition(e)}),this.addValidationRule=((e,t)=>{this.field.validator.rule.addConstraint(e,t)}),this.updateValidationRule=((e,t)=>{this.field.validator.rule.updateConstraint(e,t)}),this.removeValidationRule=(e=>{this.field.validator.rule.removeConstraint(e)}),this.setFieldProperty=((e,t)=>{this.field[e]=t}),this.setComponentProperty=((e,t)=>{this.field.componentProps[e]=t}),this.setField=(e=>{this.field=e}),this.initialize(e)}initialize(e){this.field=e.field,this.formStore=e.formStore,this.factory=e.factory}get availableConditionSources(){let{formStore:e}=this,t=[];return Object.keys(this.formStore.fieldMeta).forEach((r,l)=>{t.push({key:l,id:e.fieldMeta[r].id,label:e.fieldMeta[r].label,name:e.fieldMeta[r].name})}),t}get availableExpressions(){let e=[];return v.PredicateConditions.forEach(t=>{e.push({value:t,name:t})}),e}get availableOperators(){let e=[];return v.PredicateOperators.forEach(t=>{e.push({value:t,name:t})}),e}get hasCondition(){return!!this.field.condition}get numPredicates(){return this.field.condition?this.field.condition.predicates.length:0}removePredicate(e){let{condition:t}=this.field,r=t.predicates.findIndex(t=>t.uuid==e);r>-1&&t.predicates.splice(r,1),0==t.predicates.length&&this.field.setCondition(null)}get visible(){return!!this.field}}Re([u.action],je.prototype,"initialize",null),Re([u.computed],je.prototype,"availableConditionSources",null),Re([u.computed],je.prototype,"availableExpressions",null),Re([u.computed],je.prototype,"availableOperators",null),Re([u.computed],je.prototype,"hasCondition",null),Re([u.computed],je.prototype,"numPredicates",null),Re([u.action],je.prototype,"addCondition",void 0),Re([u.action],je.prototype,"removePredicate",null),Re([u.action],je.prototype,"addPredicate",void 0),Re([u.action],je.prototype,"setCondition",void 0),Re([u.action],je.prototype,"addValidationRule",void 0),Re([u.action],je.prototype,"updateValidationRule",void 0),Re([u.action],je.prototype,"removeValidationRule",void 0),Re([u.action],je.prototype,"setFieldProperty",void 0),Re([u.action],je.prototype,"setComponentProperty",void 0),Re([u.action],je.prototype,"setField",void 0),Re([u.computed],je.prototype,"visible",null),Object(u.decorate)(je,{field:u.observable});var xe=je;let we=class extends i.Component{constructor(e){super(e)}render(){const{store:e}=this.props;let t=new xe({formStore:e,field:e.form.content.pages[0].sections[0].columns[0].fields[0],factory:new U(e)}),{form:r}=e,{content:n,formLayoutOptions:a}=r;return i.createElement("div",{className:"form-wrapper"},n.title&&i.createElement(l.Row,null,i.createElement(l.Col,{span:20},i.createElement(l.Card,null,i.createElement("h2",null,n.title),i.createElement("br",null),i.createElement("h3",null,n.subtitle)))),a.showSteps&&i.createElement(l.Row,null,i.createElement(l.Col,{span:20},i.createElement(l.Card,null,i.createElement(l.Steps,{size:"small",current:e.currentPage},n.pages.map((e,t)=>i.createElement(l.Steps.Step,{title:e.title,key:t})))))),i.createElement(l.Row,null,i.createElement(l.Col,{span:20},i.createElement(l.Form,{onSubmit:e=>r.handleSubmit(e),layout:r.layout},i.createElement("div",{className:"page-wrapper"},i.createElement(ye,{page:n.pages[e.currentPage],store:e})),i.createElement("div",{className:"page-actions"},i.createElement(l.Card,null,i.createElement(l.Row,null,i.createElement(l.Col,{span:24,style:{textAlign:"right"}},e.currentPage==n.pages.length-1&&i.createElement(l.Button,{disabled:0==Object.keys(e.touched).length||!r.isValid||e.isSubmitting,type:"primary",style:{marginLeft:8},htmlType:"submit",className:"action-button"},"Submit"),e.currentPage<n.pages.length-1&&i.createElement(l.Button,{type:"primary",style:{marginLeft:8},className:"action-button",onClick:()=>e.nextPage()},i.createElement(l.Icon,{type:"right"}),"Next"),e.currentPage>0&&n.pages.length>1&&i.createElement(l.Button,{type:"primary",className:"action-button",onClick:()=>e.prevPage()},i.createElement(l.Icon,{type:"left"}),"Prev"))))),i.createElement("div",null,"Errors",i.createElement("br",null),JSON.stringify(e.errors)),i.createElement("div",null,"Touched",i.createElement("br",null),JSON.stringify(e.touched)),i.createElement("div",null,"Values",i.createElement("br",null),JSON.stringify(e.values)))),i.createElement(l.Col,{span:4},i.createElement(Ce,{editorStore:t}))))}};we=function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}([Q.observer],we);r(7);function Se(e,t){let r=!!(window&&window.location.hostname.indexOf("localhost")>-1),n=new K({debug:r}),a=new U(n).makeForm(t);n.setForm(a),Object(c.render)(s.a.createElement(l.Layout,{style:{height:"100vh"}},r&&s.a.createElement(o.a,null),s.a.createElement(l.Row,null,s.a.createElement("br",null)),s.a.createElement(l.Row,{justify:"space-around"},s.a.createElement(l.Col,{span:a.formLayoutOptions.wrapperSpan,offset:a.formLayoutOptions.wrapperOffset},s.a.createElement(we,{store:n})))),document.querySelector(e))}r.d(t,"renderForm",function(){return Se}),Object(n.enableLogging)({action:!0,reaction:!1,transaction:!1,compute:!1})},7:function(e,t){}});
//# sourceMappingURL=main.js.map